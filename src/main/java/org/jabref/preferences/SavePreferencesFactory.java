begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_package
DECL|package|org.jabref.preferences
package|package
name|org
operator|.
name|jabref
operator|.
name|preferences
package|;
end_package

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|bibtex
operator|.
name|LatexFieldFormatterPreferences
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|exporter
operator|.
name|SavePreferences
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|model
operator|.
name|bibtexkeypattern
operator|.
name|GlobalBibtexKeyPattern
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|model
operator|.
name|metadata
operator|.
name|SaveOrderConfig
import|;
end_import

begin_import
import|import
name|java
operator|.
name|nio
operator|.
name|charset
operator|.
name|Charset
import|;
end_import

begin_class
DECL|class|SavePreferencesFactory
specifier|public
class|class
name|SavePreferencesFactory
block|{
DECL|method|loadForExportFromPreferences (JabRefPreferences preferences)
specifier|public
specifier|static
name|SavePreferences
name|loadForExportFromPreferences
parameter_list|(
name|JabRefPreferences
name|preferences
parameter_list|)
block|{
name|Boolean
name|saveInOriginalOrder
init|=
name|preferences
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|EXPORT_IN_ORIGINAL_ORDER
argument_list|)
decl_stmt|;
name|SaveOrderConfig
name|saveOrder
init|=
literal|null
decl_stmt|;
if|if
condition|(
operator|!
name|saveInOriginalOrder
condition|)
block|{
if|if
condition|(
name|preferences
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|EXPORT_IN_SPECIFIED_ORDER
argument_list|)
condition|)
block|{
name|saveOrder
operator|=
name|preferences
operator|.
name|loadExportSaveOrder
argument_list|()
expr_stmt|;
block|}
else|else
block|{
name|saveOrder
operator|=
name|preferences
operator|.
name|loadTableSaveOrder
argument_list|()
expr_stmt|;
block|}
block|}
name|Charset
name|encoding
init|=
name|preferences
operator|.
name|getDefaultEncoding
argument_list|()
decl_stmt|;
name|Boolean
name|makeBackup
init|=
name|preferences
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|BACKUP
argument_list|)
decl_stmt|;
name|SavePreferences
operator|.
name|DatabaseSaveType
name|saveType
init|=
name|SavePreferences
operator|.
name|DatabaseSaveType
operator|.
name|ALL
decl_stmt|;
name|Boolean
name|takeMetadataSaveOrderInAccount
init|=
literal|false
decl_stmt|;
name|Boolean
name|reformatFile
init|=
name|preferences
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|REFORMAT_FILE_ON_SAVE_AND_EXPORT
argument_list|)
decl_stmt|;
name|LatexFieldFormatterPreferences
name|latexFieldFormatterPreferences
init|=
name|preferences
operator|.
name|getLatexFieldFormatterPreferences
argument_list|()
decl_stmt|;
name|GlobalBibtexKeyPattern
name|globalCiteKeyPattern
init|=
name|preferences
operator|.
name|getKeyPattern
argument_list|()
decl_stmt|;
return|return
operator|new
name|SavePreferences
argument_list|(
name|saveInOriginalOrder
argument_list|,
name|saveOrder
argument_list|,
name|encoding
argument_list|,
name|makeBackup
argument_list|,
name|saveType
argument_list|,
name|takeMetadataSaveOrderInAccount
argument_list|,
name|reformatFile
argument_list|,
name|latexFieldFormatterPreferences
argument_list|,
name|globalCiteKeyPattern
argument_list|)
return|;
block|}
DECL|method|loadForSaveFromPreferences (JabRefPreferences preferences)
specifier|public
specifier|static
name|SavePreferences
name|loadForSaveFromPreferences
parameter_list|(
name|JabRefPreferences
name|preferences
parameter_list|)
block|{
name|Boolean
name|saveInOriginalOrder
init|=
literal|false
decl_stmt|;
name|SaveOrderConfig
name|saveOrder
init|=
literal|null
decl_stmt|;
name|Charset
name|encoding
init|=
name|preferences
operator|.
name|getDefaultEncoding
argument_list|()
decl_stmt|;
name|Boolean
name|makeBackup
init|=
name|preferences
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|BACKUP
argument_list|)
decl_stmt|;
name|SavePreferences
operator|.
name|DatabaseSaveType
name|saveType
init|=
name|SavePreferences
operator|.
name|DatabaseSaveType
operator|.
name|ALL
decl_stmt|;
name|Boolean
name|takeMetadataSaveOrderInAccount
init|=
literal|true
decl_stmt|;
name|Boolean
name|reformatFile
init|=
name|preferences
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|REFORMAT_FILE_ON_SAVE_AND_EXPORT
argument_list|)
decl_stmt|;
name|LatexFieldFormatterPreferences
name|latexFieldFormatterPreferences
init|=
name|preferences
operator|.
name|getLatexFieldFormatterPreferences
argument_list|()
decl_stmt|;
name|GlobalBibtexKeyPattern
name|globalCiteKeyPattern
init|=
name|preferences
operator|.
name|getKeyPattern
argument_list|()
decl_stmt|;
return|return
operator|new
name|SavePreferences
argument_list|(
name|saveInOriginalOrder
argument_list|,
name|saveOrder
argument_list|,
name|encoding
argument_list|,
name|makeBackup
argument_list|,
name|saveType
argument_list|,
name|takeMetadataSaveOrderInAccount
argument_list|,
name|reformatFile
argument_list|,
name|latexFieldFormatterPreferences
argument_list|,
name|globalCiteKeyPattern
argument_list|)
return|;
block|}
block|}
end_class

end_unit

