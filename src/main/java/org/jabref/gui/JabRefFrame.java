begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_package
DECL|package|org.jabref.gui
package|package
name|org
operator|.
name|jabref
operator|.
name|gui
package|;
end_package

begin_import
import|import
name|com
operator|.
name|google
operator|.
name|common
operator|.
name|eventbus
operator|.
name|Subscribe
import|;
end_import

begin_import
import|import
name|com
operator|.
name|jgoodies
operator|.
name|looks
operator|.
name|HeaderStyle
import|;
end_import

begin_import
import|import
name|com
operator|.
name|jgoodies
operator|.
name|looks
operator|.
name|Options
import|;
end_import

begin_import
import|import
name|javafx
operator|.
name|application
operator|.
name|Platform
import|;
end_import

begin_import
import|import
name|javafx
operator|.
name|embed
operator|.
name|swing
operator|.
name|SwingNode
import|;
end_import

begin_import
import|import
name|javafx
operator|.
name|scene
operator|.
name|control
operator|.
name|Button
import|;
end_import

begin_import
import|import
name|javafx
operator|.
name|scene
operator|.
name|control
operator|.
name|SplitPane
import|;
end_import

begin_import
import|import
name|javafx
operator|.
name|scene
operator|.
name|layout
operator|.
name|BorderPane
import|;
end_import

begin_import
import|import
name|javafx
operator|.
name|scene
operator|.
name|layout
operator|.
name|StackPane
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|commons
operator|.
name|logging
operator|.
name|Log
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|commons
operator|.
name|logging
operator|.
name|LogFactory
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|Globals
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|JabRefExecutorService
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|actions
operator|.
name|*
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|autosaveandbackup
operator|.
name|AutosaveUIManager
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|bibtexkeypattern
operator|.
name|BibtexKeyPatternDialog
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|copyfiles
operator|.
name|CopyFilesAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|customentrytypes
operator|.
name|EntryCustomizationDialog
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|dbproperties
operator|.
name|DatabasePropertiesDialog
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|documentviewer
operator|.
name|ShowDocumentViewerAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|exporter
operator|.
name|ExportAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|exporter
operator|.
name|ExportCustomizationDialog
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|exporter
operator|.
name|SaveAllAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|exporter
operator|.
name|SaveDatabaseAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|externalfiletype
operator|.
name|ExternalFileTypeEditor
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|groups
operator|.
name|EntryTableTransferHandler
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|groups
operator|.
name|GroupSidePane
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|help
operator|.
name|AboutAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|help
operator|.
name|HelpAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|importer
operator|.
name|ImportCustomizationDialog
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|importer
operator|.
name|ImportFormats
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|importer
operator|.
name|ImportInspectionDialog
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|importer
operator|.
name|actions
operator|.
name|OpenDatabaseAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|importer
operator|.
name|fetcher
operator|.
name|GeneralFetcher
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|journals
operator|.
name|ManageJournalsAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|keyboard
operator|.
name|KeyBinding
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|keyboard
operator|.
name|KeyBindingAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|menus
operator|.
name|ChangeEntryTypeMenu
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|menus
operator|.
name|FileHistoryMenu
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|menus
operator|.
name|RightClickMenu
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|openoffice
operator|.
name|OpenOfficePanel
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|openoffice
operator|.
name|OpenOfficeSidePanel
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|preftabs
operator|.
name|PreferencesDialog
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|protectedterms
operator|.
name|ProtectedTermsDialog
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|push
operator|.
name|PushToApplicationButton
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|push
operator|.
name|PushToApplications
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|search
operator|.
name|GlobalSearchBar
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|specialfields
operator|.
name|SpecialFieldDropDown
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|specialfields
operator|.
name|SpecialFieldValueViewModel
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|util
operator|.
name|DefaultTaskExecutor
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|gui
operator|.
name|worker
operator|.
name|MarkEntriesAction
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|autosaveandbackup
operator|.
name|AutosaveManager
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|autosaveandbackup
operator|.
name|BackupManager
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|help
operator|.
name|HelpFile
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|importer
operator|.
name|IdFetcher
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|importer
operator|.
name|OutputPrinter
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|importer
operator|.
name|ParserResult
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|importer
operator|.
name|WebFetchers
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|l10n
operator|.
name|Localization
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|search
operator|.
name|SearchQuery
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|undo
operator|.
name|AddUndoableActionEvent
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|undo
operator|.
name|UndoChangeEvent
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|undo
operator|.
name|UndoRedoEvent
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|util
operator|.
name|OS
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|logic
operator|.
name|util
operator|.
name|io
operator|.
name|FileUtil
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|model
operator|.
name|database
operator|.
name|BibDatabaseContext
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|model
operator|.
name|database
operator|.
name|BibDatabaseMode
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|model
operator|.
name|database
operator|.
name|DatabaseLocation
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|model
operator|.
name|entry
operator|.
name|BibEntry
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|model
operator|.
name|entry
operator|.
name|BibtexEntryTypes
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|model
operator|.
name|entry
operator|.
name|EntryType
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|model
operator|.
name|entry
operator|.
name|FieldName
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|model
operator|.
name|entry
operator|.
name|specialfields
operator|.
name|SpecialField
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|preferences
operator|.
name|JabRefPreferences
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|preferences
operator|.
name|LastFocusedTabPreferences
import|;
end_import

begin_import
import|import
name|org
operator|.
name|jabref
operator|.
name|preferences
operator|.
name|SearchPreferences
import|;
end_import

begin_import
import|import
name|osx
operator|.
name|macadapter
operator|.
name|MacAdapter
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|*
import|;
end_import

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|*
import|;
end_import

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
import|;
end_import

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|KeyAdapter
import|;
end_import

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|MouseAdapter
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|File
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|IOException
import|;
end_import

begin_import
import|import
name|java
operator|.
name|nio
operator|.
name|file
operator|.
name|Path
import|;
end_import

begin_import
import|import
name|java
operator|.
name|nio
operator|.
name|file
operator|.
name|Paths
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|*
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|List
import|;
end_import

begin_comment
comment|/**  * The main window of the application.  */
end_comment

begin_class
DECL|class|JabRefFrame
specifier|public
class|class
name|JabRefFrame
extends|extends
name|BorderPane
implements|implements
name|OutputPrinter
block|{
DECL|field|LOGGER
specifier|private
specifier|static
specifier|final
name|Log
name|LOGGER
init|=
name|LogFactory
operator|.
name|getLog
argument_list|(
name|JabRefFrame
operator|.
name|class
argument_list|)
decl_stmt|;
comment|// Frame titles.
DECL|field|FRAME_TITLE
specifier|public
specifier|static
specifier|final
name|String
name|FRAME_TITLE
init|=
literal|"JabRef"
decl_stmt|;
DECL|field|ELLIPSES
specifier|private
specifier|static
specifier|final
name|String
name|ELLIPSES
init|=
literal|"..."
decl_stmt|;
DECL|field|nextTab
specifier|public
specifier|final
name|AbstractAction
name|nextTab
init|=
operator|new
name|ChangeTabAction
argument_list|(
literal|true
argument_list|)
decl_stmt|;
DECL|field|prevTab
specifier|public
specifier|final
name|AbstractAction
name|prevTab
init|=
operator|new
name|ChangeTabAction
argument_list|(
literal|false
argument_list|)
decl_stmt|;
DECL|field|splitPane
specifier|private
specifier|final
name|SplitPane
name|splitPane
init|=
operator|new
name|SplitPane
argument_list|()
decl_stmt|;
DECL|field|prefs
specifier|private
specifier|final
name|JabRefPreferences
name|prefs
init|=
name|Globals
operator|.
name|prefs
decl_stmt|;
DECL|field|marg
specifier|private
specifier|final
name|Insets
name|marg
init|=
operator|new
name|Insets
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|)
decl_stmt|;
DECL|field|checkIntegrity
specifier|private
specifier|final
name|IntegrityCheckAction
name|checkIntegrity
init|=
operator|new
name|IntegrityCheckAction
argument_list|(
name|this
argument_list|)
decl_stmt|;
DECL|field|tlb
specifier|private
specifier|final
name|ToolBar
name|tlb
init|=
operator|new
name|ToolBar
argument_list|()
decl_stmt|;
DECL|field|globalSearchBar
specifier|private
specifier|final
name|GlobalSearchBar
name|globalSearchBar
init|=
operator|new
name|GlobalSearchBar
argument_list|(
name|this
argument_list|)
decl_stmt|;
DECL|field|mb
specifier|private
specifier|final
name|JMenuBar
name|mb
init|=
operator|new
name|JMenuBar
argument_list|()
decl_stmt|;
DECL|field|statusLine
specifier|private
specifier|final
name|JLabel
name|statusLine
init|=
operator|new
name|JLabel
argument_list|(
literal|""
argument_list|,
name|SwingConstants
operator|.
name|LEFT
argument_list|)
decl_stmt|;
DECL|field|statusLabel
specifier|private
specifier|final
name|JLabel
name|statusLabel
init|=
operator|new
name|JLabel
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Status"
argument_list|)
operator|+
literal|':'
argument_list|,
name|SwingConstants
operator|.
name|LEFT
argument_list|)
decl_stmt|;
DECL|field|progressBar
specifier|private
specifier|final
name|JProgressBar
name|progressBar
init|=
operator|new
name|JProgressBar
argument_list|()
decl_stmt|;
DECL|field|fileHistory
specifier|private
specifier|final
name|FileHistoryMenu
name|fileHistory
init|=
operator|new
name|FileHistoryMenu
argument_list|(
name|prefs
argument_list|,
name|this
argument_list|)
decl_stmt|;
DECL|field|open
specifier|private
specifier|final
name|OpenDatabaseAction
name|open
init|=
operator|new
name|OpenDatabaseAction
argument_list|(
name|this
argument_list|,
literal|true
argument_list|)
decl_stmt|;
DECL|field|editModeAction
specifier|private
specifier|final
name|EditModeAction
name|editModeAction
init|=
operator|new
name|EditModeAction
argument_list|()
decl_stmt|;
comment|// Here we instantiate menu/toolbar actions. Actions regarding
comment|// the currently open database are defined as a GeneralAction
comment|// with a unique command string. This causes the appropriate
comment|// BasePanel's runCommand() method to be called with that command.
comment|// Note: GeneralAction's constructor automatically gets translations
comment|// for the name and message strings.
DECL|field|quit
specifier|private
specifier|final
name|AbstractAction
name|quit
init|=
operator|new
name|CloseAction
argument_list|()
decl_stmt|;
DECL|field|keyBindingAction
specifier|private
specifier|final
name|AbstractAction
name|keyBindingAction
init|=
operator|new
name|KeyBindingAction
argument_list|()
decl_stmt|;
DECL|field|newBibtexDatabaseAction
specifier|private
specifier|final
name|AbstractAction
name|newBibtexDatabaseAction
init|=
operator|new
name|NewDatabaseAction
argument_list|(
name|this
argument_list|,
name|BibDatabaseMode
operator|.
name|BIBTEX
argument_list|)
decl_stmt|;
DECL|field|newBiblatexDatabaseAction
specifier|private
specifier|final
name|AbstractAction
name|newBiblatexDatabaseAction
init|=
operator|new
name|NewDatabaseAction
argument_list|(
name|this
argument_list|,
name|BibDatabaseMode
operator|.
name|BIBLATEX
argument_list|)
decl_stmt|;
DECL|field|connectToSharedDatabaseAction
specifier|private
specifier|final
name|AbstractAction
name|connectToSharedDatabaseAction
init|=
operator|new
name|ConnectToSharedDatabaseAction
argument_list|(
name|this
argument_list|)
decl_stmt|;
DECL|field|newSubDatabaseAction
specifier|private
specifier|final
name|AbstractAction
name|newSubDatabaseAction
init|=
operator|new
name|NewSubDatabaseAction
argument_list|(
name|this
argument_list|)
decl_stmt|;
DECL|field|jabrefWebPageAction
specifier|private
specifier|final
name|AbstractAction
name|jabrefWebPageAction
init|=
operator|new
name|OpenBrowserAction
argument_list|(
literal|"https://jabref.org"
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Website"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Opens JabRef's website"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|getImage
argument_list|(
literal|"about"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|getImage
argument_list|(
literal|"about"
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|jabrefFacebookAction
specifier|private
specifier|final
name|AbstractAction
name|jabrefFacebookAction
init|=
operator|new
name|OpenBrowserAction
argument_list|(
literal|"https://www.facebook.com/JabRef/"
argument_list|,
literal|"Facebook"
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Opens JabRef's Facebook page"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|FACEBOOK
operator|.
name|getSmallIcon
argument_list|()
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|FACEBOOK
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|jabrefBlogAction
specifier|private
specifier|final
name|AbstractAction
name|jabrefBlogAction
init|=
operator|new
name|OpenBrowserAction
argument_list|(
literal|"https://blog.jabref.org/"
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Blog"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Opens JabRef's blog"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|BLOG
operator|.
name|getSmallIcon
argument_list|()
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|BLOG
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|developmentVersionAction
specifier|private
specifier|final
name|AbstractAction
name|developmentVersionAction
init|=
operator|new
name|OpenBrowserAction
argument_list|(
literal|"https://builds.jabref.org/master/"
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Development version"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Opens a link where the current development version can be downloaded"
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|changeLogAction
specifier|private
specifier|final
name|AbstractAction
name|changeLogAction
init|=
operator|new
name|OpenBrowserAction
argument_list|(
literal|"https://github.com/JabRef/jabref/blob/master/CHANGELOG.md"
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"View change log"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"See what has been changed in the JabRef versions"
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|forkMeOnGitHubAction
specifier|private
specifier|final
name|AbstractAction
name|forkMeOnGitHubAction
init|=
operator|new
name|OpenBrowserAction
argument_list|(
literal|"https://github.com/JabRef/jabref"
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Fork me on GitHub"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Opens JabRef's GitHub page"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|GITHUB
operator|.
name|getSmallIcon
argument_list|()
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|GITHUB
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|donationAction
specifier|private
specifier|final
name|AbstractAction
name|donationAction
init|=
operator|new
name|OpenBrowserAction
argument_list|(
literal|"https://github.com/JabRef/jabref/wiki/Donations"
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Donate to JabRef"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Donate to JabRef"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|DONATE
operator|.
name|getSmallIcon
argument_list|()
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|DONATE
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|openForumAction
specifier|private
specifier|final
name|AbstractAction
name|openForumAction
init|=
operator|new
name|OpenBrowserAction
argument_list|(
literal|"http://discourse.jabref.org/"
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Online help forum"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Online help forum"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|FORUM
operator|.
name|getSmallIcon
argument_list|()
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|FORUM
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|help
specifier|private
specifier|final
name|AbstractAction
name|help
init|=
operator|new
name|HelpAction
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Online help"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Online help"
argument_list|)
argument_list|,
name|HelpFile
operator|.
name|CONTENTS
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|HELP
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|about
specifier|private
specifier|final
name|AbstractAction
name|about
init|=
operator|new
name|AboutAction
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"About JabRef"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"About JabRef"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|getImage
argument_list|(
literal|"about"
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|editEntry
specifier|private
specifier|final
name|AbstractAction
name|editEntry
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|EDIT
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Edit entry"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Edit entry"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|EDIT_ENTRY
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|EDIT_ENTRY
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|focusTable
specifier|private
specifier|final
name|AbstractAction
name|focusTable
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|FOCUS_TABLE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Focus entry table"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Move the keyboard focus to the entry table"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|FOCUS_ENTRY_TABLE
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|save
specifier|private
specifier|final
name|AbstractAction
name|save
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|SAVE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Save library"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Save library"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|SAVE_DATABASE
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|SAVE
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|saveAs
specifier|private
specifier|final
name|AbstractAction
name|saveAs
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|SAVE_AS
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Save library as..."
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Save library as..."
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|SAVE_DATABASE_AS
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|saveAll
specifier|private
specifier|final
name|AbstractAction
name|saveAll
init|=
operator|new
name|SaveAllAction
argument_list|(
name|JabRefFrame
operator|.
name|this
argument_list|)
decl_stmt|;
DECL|field|saveSelectedAs
specifier|private
specifier|final
name|AbstractAction
name|saveSelectedAs
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|SAVE_SELECTED_AS
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Save selected as..."
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Save selected as..."
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|saveSelectedAsPlain
specifier|private
specifier|final
name|AbstractAction
name|saveSelectedAsPlain
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|SAVE_SELECTED_AS_PLAIN
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Save selected as plain BibTeX..."
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Save selected as plain BibTeX..."
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|importCurrent
specifier|private
specifier|final
name|AbstractAction
name|importCurrent
init|=
name|ImportFormats
operator|.
name|getImportAction
argument_list|(
name|this
argument_list|,
literal|false
argument_list|)
decl_stmt|;
DECL|field|importNew
specifier|private
specifier|final
name|AbstractAction
name|importNew
init|=
name|ImportFormats
operator|.
name|getImportAction
argument_list|(
name|this
argument_list|,
literal|true
argument_list|)
decl_stmt|;
DECL|field|sortTabs
specifier|private
specifier|final
name|AbstractAction
name|sortTabs
init|=
operator|new
name|SortTabsAction
argument_list|(
name|this
argument_list|)
decl_stmt|;
DECL|field|undo
specifier|private
specifier|final
name|AbstractAction
name|undo
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|UNDO
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Undo"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Undo"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|UNDO
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|UNDO
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|redo
specifier|private
specifier|final
name|AbstractAction
name|redo
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|REDO
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Redo"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Redo"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|REDO
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|REDO
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|forward
specifier|private
specifier|final
name|AbstractAction
name|forward
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|FORWARD
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Forward"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Forward"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|FORWARD
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|RIGHT
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|back
specifier|private
specifier|final
name|AbstractAction
name|back
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|BACK
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Back"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Back"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|BACK
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|LEFT
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|deleteEntry
specifier|private
specifier|final
name|AbstractAction
name|deleteEntry
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|DELETE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Delete entry"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Delete entry"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|DELETE_ENTRY
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|DELETE_ENTRY
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|copy
specifier|private
specifier|final
name|AbstractAction
name|copy
init|=
operator|new
name|EditAction
argument_list|(
name|Actions
operator|.
name|COPY
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Copy"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Copy"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|COPY
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|COPY
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|paste
specifier|private
specifier|final
name|AbstractAction
name|paste
init|=
operator|new
name|EditAction
argument_list|(
name|Actions
operator|.
name|PASTE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Paste"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Paste"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|PASTE
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|PASTE
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|cut
specifier|private
specifier|final
name|AbstractAction
name|cut
init|=
operator|new
name|EditAction
argument_list|(
name|Actions
operator|.
name|CUT
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Cut"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Cut"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|CUT
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|CUT
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|openConsole
specifier|private
specifier|final
name|AbstractAction
name|openConsole
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|OPEN_CONSOLE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Open terminal here"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Open terminal here"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|OPEN_CONSOLE
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|CONSOLE
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|pullChangesFromSharedDatabase
specifier|private
specifier|final
name|AbstractAction
name|pullChangesFromSharedDatabase
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|PULL_CHANGES_FROM_SHARED_DATABASE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Pull changes from shared database"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Pull changes from shared database"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|PULL_CHANGES_FROM_SHARED_DATABASE
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|PULL
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|mark
specifier|private
specifier|final
name|AbstractAction
name|mark
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|MARK_ENTRIES
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Mark entries"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Mark entries"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|MARK_ENTRIES
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|MARK_ENTRIES
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|markSpecific
specifier|private
specifier|final
name|JMenu
name|markSpecific
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Mark specific color"
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|unmark
specifier|private
specifier|final
name|AbstractAction
name|unmark
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|UNMARK_ENTRIES
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Unmark entries"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Unmark entries"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|UNMARK_ENTRIES
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|UNMARK_ENTRIES
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|unmarkAll
specifier|private
specifier|final
name|AbstractAction
name|unmarkAll
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|UNMARK_ALL
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Unmark all"
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|toggleRelevance
specifier|private
specifier|final
name|AbstractAction
name|toggleRelevance
init|=
operator|new
name|GeneralAction
argument_list|(
operator|new
name|SpecialFieldValueViewModel
argument_list|(
name|SpecialField
operator|.
name|RELEVANCE
operator|.
name|getValues
argument_list|()
operator|.
name|get
argument_list|(
literal|0
argument_list|)
argument_list|)
operator|.
name|getActionName
argument_list|()
argument_list|,
operator|new
name|SpecialFieldValueViewModel
argument_list|(
name|SpecialField
operator|.
name|RELEVANCE
operator|.
name|getValues
argument_list|()
operator|.
name|get
argument_list|(
literal|0
argument_list|)
argument_list|)
operator|.
name|getMenuString
argument_list|()
argument_list|,
operator|new
name|SpecialFieldValueViewModel
argument_list|(
name|SpecialField
operator|.
name|RELEVANCE
operator|.
name|getValues
argument_list|()
operator|.
name|get
argument_list|(
literal|0
argument_list|)
argument_list|)
operator|.
name|getToolTipText
argument_list|()
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|RELEVANCE
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|toggleQualityAssured
specifier|private
specifier|final
name|AbstractAction
name|toggleQualityAssured
init|=
operator|new
name|GeneralAction
argument_list|(
operator|new
name|SpecialFieldValueViewModel
argument_list|(
name|SpecialField
operator|.
name|QUALITY
operator|.
name|getValues
argument_list|()
operator|.
name|get
argument_list|(
literal|0
argument_list|)
argument_list|)
operator|.
name|getActionName
argument_list|()
argument_list|,
operator|new
name|SpecialFieldValueViewModel
argument_list|(
name|SpecialField
operator|.
name|QUALITY
operator|.
name|getValues
argument_list|()
operator|.
name|get
argument_list|(
literal|0
argument_list|)
argument_list|)
operator|.
name|getMenuString
argument_list|()
argument_list|,
operator|new
name|SpecialFieldValueViewModel
argument_list|(
name|SpecialField
operator|.
name|QUALITY
operator|.
name|getValues
argument_list|()
operator|.
name|get
argument_list|(
literal|0
argument_list|)
argument_list|)
operator|.
name|getToolTipText
argument_list|()
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|QUALITY_ASSURED
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|togglePrinted
specifier|private
specifier|final
name|AbstractAction
name|togglePrinted
init|=
operator|new
name|GeneralAction
argument_list|(
operator|new
name|SpecialFieldValueViewModel
argument_list|(
name|SpecialField
operator|.
name|PRINTED
operator|.
name|getValues
argument_list|()
operator|.
name|get
argument_list|(
literal|0
argument_list|)
argument_list|)
operator|.
name|getActionName
argument_list|()
argument_list|,
operator|new
name|SpecialFieldValueViewModel
argument_list|(
name|SpecialField
operator|.
name|PRINTED
operator|.
name|getValues
argument_list|()
operator|.
name|get
argument_list|(
literal|0
argument_list|)
argument_list|)
operator|.
name|getMenuString
argument_list|()
argument_list|,
operator|new
name|SpecialFieldValueViewModel
argument_list|(
name|SpecialField
operator|.
name|PRINTED
operator|.
name|getValues
argument_list|()
operator|.
name|get
argument_list|(
literal|0
argument_list|)
argument_list|)
operator|.
name|getToolTipText
argument_list|()
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|PRINTED
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|normalSearch
specifier|private
specifier|final
name|AbstractAction
name|normalSearch
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|SEARCH
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Search"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Search"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|SEARCH
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|SEARCH
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|manageSelectors
specifier|private
specifier|final
name|AbstractAction
name|manageSelectors
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|MANAGE_SELECTORS
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Manage content selectors"
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|copyPreview
specifier|private
specifier|final
name|AbstractAction
name|copyPreview
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|COPY_CITATION_HTML
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Copy preview"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|COPY_PREVIEW
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|copyTitle
specifier|private
specifier|final
name|AbstractAction
name|copyTitle
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|COPY_TITLE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Copy title"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|COPY_TITLE
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|copyKey
specifier|private
specifier|final
name|AbstractAction
name|copyKey
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|COPY_KEY
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Copy BibTeX key"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|COPY_BIBTEX_KEY
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|copyCiteKey
specifier|private
specifier|final
name|AbstractAction
name|copyCiteKey
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|COPY_CITE_KEY
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Copy \\cite{BibTeX key}"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|COPY_CITE_BIBTEX_KEY
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|copyKeyAndTitle
specifier|private
specifier|final
name|AbstractAction
name|copyKeyAndTitle
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|COPY_KEY_AND_TITLE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Copy BibTeX key and title"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|COPY_BIBTEX_KEY_AND_TITLE
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|copyKeyAndLink
specifier|private
specifier|final
name|AbstractAction
name|copyKeyAndLink
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|COPY_KEY_AND_LINK
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Copy BibTeX key and link"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|COPY_BIBTEX_KEY_AND_LINK
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|mergeDatabaseAction
specifier|private
specifier|final
name|AbstractAction
name|mergeDatabaseAction
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|MERGE_DATABASE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Append library"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Append contents from a BibTeX library into the currently viewed library"
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|selectAll
specifier|private
specifier|final
name|AbstractAction
name|selectAll
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|SELECT_ALL
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Select all"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|SELECT_ALL
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|replaceAll
specifier|private
specifier|final
name|AbstractAction
name|replaceAll
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|REPLACE_ALL
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Replace string"
argument_list|)
operator|+
name|ELLIPSES
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|REPLACE_STRING
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|editPreamble
specifier|private
specifier|final
name|AbstractAction
name|editPreamble
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|EDIT_PREAMBLE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Edit preamble"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Edit preamble"
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|editStrings
specifier|private
specifier|final
name|AbstractAction
name|editStrings
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|EDIT_STRINGS
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Edit strings"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Edit strings"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|EDIT_STRINGS
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|EDIT_STRINGS
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|customizeAction
specifier|private
specifier|final
name|AbstractAction
name|customizeAction
init|=
operator|new
name|CustomizeEntryTypeAction
argument_list|()
decl_stmt|;
DECL|field|toggleToolbar
specifier|private
specifier|final
name|Action
name|toggleToolbar
init|=
name|enableToggle
argument_list|(
operator|new
name|AbstractAction
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Hide/show toolbar"
argument_list|)
argument_list|)
block|{
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|SHORT_DESCRIPTION
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Hide/show toolbar"
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|tlb
operator|.
name|setVisible
argument_list|(
operator|!
name|tlb
operator|.
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
decl_stmt|;
DECL|field|showPdvViewer
specifier|private
specifier|final
name|AbstractAction
name|showPdvViewer
init|=
operator|new
name|ShowDocumentViewerAction
argument_list|()
decl_stmt|;
DECL|field|addToGroup
specifier|private
specifier|final
name|AbstractAction
name|addToGroup
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|ADD_TO_GROUP
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Add to group"
argument_list|)
operator|+
name|ELLIPSES
argument_list|)
decl_stmt|;
DECL|field|removeFromGroup
specifier|private
specifier|final
name|AbstractAction
name|removeFromGroup
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|REMOVE_FROM_GROUP
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Remove from group"
argument_list|)
operator|+
name|ELLIPSES
argument_list|)
decl_stmt|;
DECL|field|moveToGroup
specifier|private
specifier|final
name|AbstractAction
name|moveToGroup
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|MOVE_TO_GROUP
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Move to group"
argument_list|)
operator|+
name|ELLIPSES
argument_list|)
decl_stmt|;
DECL|field|togglePreview
specifier|private
specifier|final
name|Action
name|togglePreview
init|=
name|enableToggle
argument_list|(
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|TOGGLE_PREVIEW
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Toggle entry preview"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Toggle entry preview"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|TOGGLE_ENTRY_PREVIEW
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|TOGGLE_ENTRY_PREVIEW
operator|.
name|getIcon
argument_list|()
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|nextPreviewStyle
specifier|private
specifier|final
name|AbstractAction
name|nextPreviewStyle
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|NEXT_PREVIEW_STYLE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Next preview layout"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|NEXT_PREVIEW_LAYOUT
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|previousPreviewStyle
specifier|private
specifier|final
name|AbstractAction
name|previousPreviewStyle
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|PREVIOUS_PREVIEW_STYLE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Previous preview layout"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|PREVIOUS_PREVIEW_LAYOUT
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|makeKeyAction
specifier|private
specifier|final
name|AbstractAction
name|makeKeyAction
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|MAKE_KEY
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Autogenerate BibTeX keys"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Autogenerate BibTeX keys"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|AUTOGENERATE_BIBTEX_KEYS
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|MAKE_KEY
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|writeXmpAction
specifier|private
specifier|final
name|AbstractAction
name|writeXmpAction
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|WRITE_XMP
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Write XMP-metadata to PDFs"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Will write XMP-metadata to the PDFs linked from selected entries."
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|WRITE_XMP
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|openFolder
specifier|private
specifier|final
name|AbstractAction
name|openFolder
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|OPEN_FOLDER
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Open folder"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Open folder"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|OPEN_FOLDER
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|openFile
specifier|private
specifier|final
name|AbstractAction
name|openFile
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|OPEN_EXTERNAL_FILE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Open file"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Open file"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|OPEN_FILE
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|FILE
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|openUrl
specifier|private
specifier|final
name|AbstractAction
name|openUrl
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|OPEN_URL
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Open URL or DOI"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Open URL or DOI"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|OPEN_URL_OR_DOI
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|WWW
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|dupliCheck
specifier|private
specifier|final
name|AbstractAction
name|dupliCheck
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|DUPLI_CHECK
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Find duplicates"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|FIND_DUPLICATES
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|plainTextImport
specifier|private
specifier|final
name|AbstractAction
name|plainTextImport
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|PLAIN_TEXT_IMPORT
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"New entry from plain text"
argument_list|)
operator|+
name|ELLIPSES
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|NEW_FROM_PLAIN_TEXT
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|customExpAction
specifier|private
specifier|final
name|AbstractAction
name|customExpAction
init|=
operator|new
name|CustomizeExportsAction
argument_list|()
decl_stmt|;
DECL|field|customImpAction
specifier|private
specifier|final
name|AbstractAction
name|customImpAction
init|=
operator|new
name|CustomizeImportsAction
argument_list|()
decl_stmt|;
DECL|field|customFileTypesAction
specifier|private
specifier|final
name|AbstractAction
name|customFileTypesAction
init|=
name|ExternalFileTypeEditor
operator|.
name|getAction
argument_list|(
name|this
argument_list|)
decl_stmt|;
DECL|field|exportToClipboard
specifier|private
specifier|final
name|AbstractAction
name|exportToClipboard
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|EXPORT_TO_CLIPBOARD
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Export selected entries to clipboard"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|EXPORT_TO_CLIPBOARD
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|autoSetFile
specifier|private
specifier|final
name|AbstractAction
name|autoSetFile
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|AUTO_SET_FILE
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Synchronize file links"
argument_list|)
operator|+
name|ELLIPSES
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|SYNCHRONIZE_FILES
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|abbreviateMedline
specifier|private
specifier|final
name|AbstractAction
name|abbreviateMedline
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|ABBREVIATE_MEDLINE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Abbreviate journal names (MEDLINE)"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Abbreviate journal names of the selected entries (MEDLINE abbreviation)"
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|abbreviateIso
specifier|private
specifier|final
name|AbstractAction
name|abbreviateIso
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|ABBREVIATE_ISO
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Abbreviate journal names (ISO)"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Abbreviate journal names of the selected entries (ISO abbreviation)"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|ABBREVIATE
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|unabbreviate
specifier|private
specifier|final
name|AbstractAction
name|unabbreviate
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|UNABBREVIATE
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Unabbreviate journal names"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Unabbreviate journal names of the selected entries"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|UNABBREVIATE
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|exportLinkedFiles
specifier|private
specifier|final
name|AbstractAction
name|exportLinkedFiles
init|=
operator|new
name|CopyFilesAction
argument_list|()
decl_stmt|;
DECL|field|manageJournals
specifier|private
specifier|final
name|AbstractAction
name|manageJournals
init|=
operator|new
name|ManageJournalsAction
argument_list|()
decl_stmt|;
DECL|field|databaseProperties
specifier|private
specifier|final
name|AbstractAction
name|databaseProperties
init|=
operator|new
name|DatabasePropertiesAction
argument_list|()
decl_stmt|;
DECL|field|bibtexKeyPattern
specifier|private
specifier|final
name|AbstractAction
name|bibtexKeyPattern
init|=
operator|new
name|BibtexKeyPatternAction
argument_list|()
decl_stmt|;
DECL|field|errorConsole
specifier|private
specifier|final
name|AbstractAction
name|errorConsole
init|=
operator|new
name|ErrorConsoleAction
argument_list|()
decl_stmt|;
DECL|field|cleanupEntries
specifier|private
specifier|final
name|AbstractAction
name|cleanupEntries
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|CLEANUP
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Cleanup entries"
argument_list|)
operator|+
name|ELLIPSES
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Cleanup entries"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|CLEANUP
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|CLEANUP_ENTRIES
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|mergeEntries
specifier|private
specifier|final
name|AbstractAction
name|mergeEntries
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|MERGE_ENTRIES
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Merge entries"
argument_list|)
operator|+
name|ELLIPSES
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Merge entries"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|MERGE_ENTRIES
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|downloadFullText
specifier|private
specifier|final
name|AbstractAction
name|downloadFullText
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|DOWNLOAD_FULL_TEXT
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Look up full text documents"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|DOWNLOAD_FULL_TEXT
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|increaseFontSize
specifier|private
specifier|final
name|AbstractAction
name|increaseFontSize
init|=
operator|new
name|IncreaseTableFontSizeAction
argument_list|()
decl_stmt|;
DECL|field|defaultFontSize
specifier|private
specifier|final
name|AbstractAction
name|defaultFontSize
init|=
operator|new
name|DefaultTableFontSizeAction
argument_list|()
decl_stmt|;
DECL|field|decreseFontSize
specifier|private
specifier|final
name|AbstractAction
name|decreseFontSize
init|=
operator|new
name|DecreaseTableFontSizeAction
argument_list|()
decl_stmt|;
DECL|field|resolveDuplicateKeys
specifier|private
specifier|final
name|AbstractAction
name|resolveDuplicateKeys
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|RESOLVE_DUPLICATE_KEYS
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Resolve duplicate BibTeX keys"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Find and remove duplicate BibTeX keys"
argument_list|)
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|RESOLVE_DUPLICATE_BIBTEX_KEYS
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|sendAsEmail
specifier|private
specifier|final
name|AbstractAction
name|sendAsEmail
init|=
operator|new
name|GeneralAction
argument_list|(
name|Actions
operator|.
name|SEND_AS_EMAIL
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Send as email"
argument_list|)
argument_list|,
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|EMAIL
operator|.
name|getIcon
argument_list|()
argument_list|)
decl_stmt|;
DECL|field|massSetField
specifier|private
specifier|final
name|MassSetFieldAction
name|massSetField
init|=
operator|new
name|MassSetFieldAction
argument_list|(
name|this
argument_list|)
decl_stmt|;
DECL|field|manageKeywords
specifier|private
specifier|final
name|ManageKeywordsAction
name|manageKeywords
init|=
operator|new
name|ManageKeywordsAction
argument_list|(
name|this
argument_list|)
decl_stmt|;
DECL|field|lookupIdentifiers
specifier|private
specifier|final
name|JMenu
name|lookupIdentifiers
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Look up document identifier..."
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|findUnlinkedFiles
specifier|private
specifier|final
name|GeneralAction
name|findUnlinkedFiles
init|=
operator|new
name|GeneralAction
argument_list|(
name|FindUnlinkedFilesDialog
operator|.
name|ACTION_COMMAND
argument_list|,
name|FindUnlinkedFilesDialog
operator|.
name|ACTION_MENU_TITLE
argument_list|,
name|FindUnlinkedFilesDialog
operator|.
name|ACTION_SHORT_DESCRIPTION
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|FIND_UNLINKED_FILES
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|autoLinkFile
specifier|private
specifier|final
name|AutoLinkFilesAction
name|autoLinkFile
init|=
operator|new
name|AutoLinkFilesAction
argument_list|()
decl_stmt|;
comment|// The action for adding a new entry of unspecified type.
DECL|field|newEntryAction
specifier|private
specifier|final
name|NewEntryAction
name|newEntryAction
init|=
operator|new
name|NewEntryAction
argument_list|(
name|this
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|NEW_ENTRY
argument_list|)
argument_list|)
decl_stmt|;
DECL|field|newSpecificEntryAction
specifier|private
specifier|final
name|List
argument_list|<
name|NewEntryAction
argument_list|>
name|newSpecificEntryAction
init|=
name|getNewEntryActions
argument_list|()
decl_stmt|;
comment|// The action for closing the current database and leaving the window open.
DECL|field|closeDatabaseAction
specifier|private
specifier|final
name|CloseDatabaseAction
name|closeDatabaseAction
init|=
operator|new
name|CloseDatabaseAction
argument_list|()
decl_stmt|;
DECL|field|closeAllDatabasesAction
specifier|private
specifier|final
name|CloseAllDatabasesAction
name|closeAllDatabasesAction
init|=
operator|new
name|CloseAllDatabasesAction
argument_list|()
decl_stmt|;
DECL|field|closeOtherDatabasesAction
specifier|private
specifier|final
name|CloseOtherDatabasesAction
name|closeOtherDatabasesAction
init|=
operator|new
name|CloseOtherDatabasesAction
argument_list|()
decl_stmt|;
comment|// The action for opening the preferences dialog.
DECL|field|showPrefs
specifier|private
specifier|final
name|AbstractAction
name|showPrefs
init|=
operator|new
name|ShowPrefsAction
argument_list|()
decl_stmt|;
comment|// Lists containing different subsets of actions for different purposes
DECL|field|specialFieldButtons
specifier|private
specifier|final
name|List
argument_list|<
name|Object
argument_list|>
name|specialFieldButtons
init|=
operator|new
name|LinkedList
argument_list|<>
argument_list|()
decl_stmt|;
DECL|field|openDatabaseOnlyActions
specifier|private
specifier|final
name|List
argument_list|<
name|Object
argument_list|>
name|openDatabaseOnlyActions
init|=
operator|new
name|LinkedList
argument_list|<>
argument_list|()
decl_stmt|;
DECL|field|severalDatabasesOnlyActions
specifier|private
specifier|final
name|List
argument_list|<
name|Object
argument_list|>
name|severalDatabasesOnlyActions
init|=
operator|new
name|LinkedList
argument_list|<>
argument_list|()
decl_stmt|;
DECL|field|openAndSavedDatabasesOnlyActions
specifier|private
specifier|final
name|List
argument_list|<
name|Object
argument_list|>
name|openAndSavedDatabasesOnlyActions
init|=
operator|new
name|LinkedList
argument_list|<>
argument_list|()
decl_stmt|;
DECL|field|sharedDatabaseOnlyActions
specifier|private
specifier|final
name|List
argument_list|<
name|Object
argument_list|>
name|sharedDatabaseOnlyActions
init|=
operator|new
name|LinkedList
argument_list|<>
argument_list|()
decl_stmt|;
DECL|field|noSharedDatabaseActions
specifier|private
specifier|final
name|List
argument_list|<
name|Object
argument_list|>
name|noSharedDatabaseActions
init|=
operator|new
name|LinkedList
argument_list|<>
argument_list|()
decl_stmt|;
DECL|field|oneEntryOnlyActions
specifier|private
specifier|final
name|List
argument_list|<
name|Object
argument_list|>
name|oneEntryOnlyActions
init|=
operator|new
name|LinkedList
argument_list|<>
argument_list|()
decl_stmt|;
DECL|field|oneEntryWithFileOnlyActions
specifier|private
specifier|final
name|List
argument_list|<
name|Object
argument_list|>
name|oneEntryWithFileOnlyActions
init|=
operator|new
name|LinkedList
argument_list|<>
argument_list|()
decl_stmt|;
DECL|field|oneEntryWithURLorDOIOnlyActions
specifier|private
specifier|final
name|List
argument_list|<
name|Object
argument_list|>
name|oneEntryWithURLorDOIOnlyActions
init|=
operator|new
name|LinkedList
argument_list|<>
argument_list|()
decl_stmt|;
DECL|field|twoEntriesOnlyActions
specifier|private
specifier|final
name|List
argument_list|<
name|Object
argument_list|>
name|twoEntriesOnlyActions
init|=
operator|new
name|LinkedList
argument_list|<>
argument_list|()
decl_stmt|;
DECL|field|atLeastOneEntryActions
specifier|private
specifier|final
name|List
argument_list|<
name|Object
argument_list|>
name|atLeastOneEntryActions
init|=
operator|new
name|LinkedList
argument_list|<>
argument_list|()
decl_stmt|;
DECL|field|prefsDialog
specifier|private
name|PreferencesDialog
name|prefsDialog
decl_stmt|;
DECL|field|lastTabbedPanelSelectionIndex
specifier|private
name|int
name|lastTabbedPanelSelectionIndex
init|=
operator|-
literal|1
decl_stmt|;
comment|// The sidepane manager takes care of populating the sidepane.
DECL|field|sidePaneManager
specifier|private
name|SidePaneManager
name|sidePaneManager
decl_stmt|;
DECL|field|tabbedPane
specifier|private
name|JTabbedPane
name|tabbedPane
decl_stmt|;
comment|// initialized at constructor
DECL|field|exportAll
specifier|private
specifier|final
name|AbstractAction
name|exportAll
init|=
name|ExportAction
operator|.
name|getExportAction
argument_list|(
name|this
argument_list|,
literal|false
argument_list|)
decl_stmt|;
DECL|field|exportSelected
specifier|private
specifier|final
name|AbstractAction
name|exportSelected
init|=
name|ExportAction
operator|.
name|getExportAction
argument_list|(
name|this
argument_list|,
literal|true
argument_list|)
decl_stmt|;
comment|/* References to the toggle buttons in the toolbar */
DECL|field|previewToggle
specifier|private
name|JToggleButton
name|previewToggle
decl_stmt|;
DECL|field|rankSubMenu
specifier|private
name|JMenu
name|rankSubMenu
decl_stmt|;
DECL|field|pushExternalButton
specifier|private
name|PushToApplicationButton
name|pushExternalButton
decl_stmt|;
DECL|field|pushApplications
specifier|private
name|PushToApplications
name|pushApplications
decl_stmt|;
DECL|field|generalFetcher
specifier|private
name|GeneralFetcher
name|generalFetcher
decl_stmt|;
DECL|field|openOfficePanel
specifier|private
name|OpenOfficePanel
name|openOfficePanel
decl_stmt|;
DECL|field|groupSidePane
specifier|private
name|GroupSidePane
name|groupSidePane
decl_stmt|;
DECL|field|previousTabCount
specifier|private
name|int
name|previousTabCount
init|=
operator|-
literal|1
decl_stmt|;
DECL|field|newSpec
specifier|private
name|JMenu
name|newSpec
decl_stmt|;
DECL|method|JabRefFrame ()
specifier|public
name|JabRefFrame
parameter_list|()
block|{
name|init
argument_list|()
expr_stmt|;
name|updateEnabledState
argument_list|()
expr_stmt|;
block|}
DECL|method|enableToggle (Action a, boolean initialValue)
specifier|private
specifier|static
name|Action
name|enableToggle
parameter_list|(
name|Action
name|a
parameter_list|,
name|boolean
name|initialValue
parameter_list|)
block|{
comment|// toggle only works correctly when the SELECTED_KEY is set to false or true explicitly upon start
name|a
operator|.
name|putValue
argument_list|(
name|Action
operator|.
name|SELECTED_KEY
argument_list|,
name|String
operator|.
name|valueOf
argument_list|(
name|initialValue
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|a
return|;
block|}
DECL|method|enableToggle (Action a)
specifier|private
specifier|static
name|Action
name|enableToggle
parameter_list|(
name|Action
name|a
parameter_list|)
block|{
return|return
name|enableToggle
argument_list|(
name|a
argument_list|,
literal|false
argument_list|)
return|;
block|}
DECL|method|subMenu (String name)
specifier|public
specifier|static
name|JMenu
name|subMenu
parameter_list|(
name|String
name|name
parameter_list|)
block|{
name|int
name|i
init|=
name|name
operator|.
name|indexOf
argument_list|(
literal|'&'
argument_list|)
decl_stmt|;
name|JMenu
name|res
decl_stmt|;
if|if
condition|(
name|i
operator|>=
literal|0
condition|)
block|{
name|res
operator|=
operator|new
name|JMenu
argument_list|(
name|name
operator|.
name|substring
argument_list|(
literal|0
argument_list|,
name|i
argument_list|)
operator|+
name|name
operator|.
name|substring
argument_list|(
name|i
operator|+
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|char
name|mnemonic
init|=
name|Character
operator|.
name|toUpperCase
argument_list|(
name|name
operator|.
name|charAt
argument_list|(
name|i
operator|+
literal|1
argument_list|)
argument_list|)
decl_stmt|;
name|res
operator|.
name|setMnemonic
argument_list|(
operator|(
name|int
operator|)
name|mnemonic
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|res
operator|=
operator|new
name|JMenu
argument_list|(
name|name
argument_list|)
expr_stmt|;
block|}
return|return
name|res
return|;
block|}
comment|/**      * Takes a list of Object and calls the method setEnabled on them, depending on whether it is an Action or a      * Component.      *      * @param list List that should contain Actions and Components.      */
DECL|method|setEnabled (List<Object> list, boolean enabled)
specifier|private
specifier|static
name|void
name|setEnabled
parameter_list|(
name|List
argument_list|<
name|Object
argument_list|>
name|list
parameter_list|,
name|boolean
name|enabled
parameter_list|)
block|{
for|for
control|(
name|Object
name|actionOrComponent
range|:
name|list
control|)
block|{
if|if
condition|(
name|actionOrComponent
operator|instanceof
name|Action
condition|)
block|{
operator|(
operator|(
name|Action
operator|)
name|actionOrComponent
operator|)
operator|.
name|setEnabled
argument_list|(
name|enabled
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|actionOrComponent
operator|instanceof
name|Component
condition|)
block|{
operator|(
operator|(
name|Component
operator|)
name|actionOrComponent
operator|)
operator|.
name|setEnabled
argument_list|(
name|enabled
argument_list|)
expr_stmt|;
if|if
condition|(
name|actionOrComponent
operator|instanceof
name|JPanel
condition|)
block|{
name|JPanel
name|root
init|=
operator|(
name|JPanel
operator|)
name|actionOrComponent
decl_stmt|;
for|for
control|(
name|int
name|index
init|=
literal|0
init|;
name|index
operator|<
name|root
operator|.
name|getComponentCount
argument_list|()
condition|;
name|index
operator|++
control|)
block|{
name|root
operator|.
name|getComponent
argument_list|(
name|index
argument_list|)
operator|.
name|setEnabled
argument_list|(
name|enabled
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
DECL|method|getNewEntryActions ()
specifier|private
name|List
argument_list|<
name|NewEntryAction
argument_list|>
name|getNewEntryActions
parameter_list|()
block|{
comment|// only Bibtex
name|List
argument_list|<
name|NewEntryAction
argument_list|>
name|actions
init|=
operator|new
name|ArrayList
argument_list|<>
argument_list|()
decl_stmt|;
for|for
control|(
name|EntryType
name|type
range|:
name|BibtexEntryTypes
operator|.
name|ALL
control|)
block|{
name|KeyStroke
name|keyStroke
init|=
operator|new
name|ChangeEntryTypeMenu
argument_list|()
operator|.
name|entryShortCuts
operator|.
name|get
argument_list|(
name|type
operator|.
name|getName
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|keyStroke
operator|==
literal|null
condition|)
block|{
name|actions
operator|.
name|add
argument_list|(
operator|new
name|NewEntryAction
argument_list|(
name|this
argument_list|,
name|type
operator|.
name|getName
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|actions
operator|.
name|add
argument_list|(
operator|new
name|NewEntryAction
argument_list|(
name|this
argument_list|,
name|type
operator|.
name|getName
argument_list|()
argument_list|,
name|keyStroke
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
return|return
name|actions
return|;
block|}
DECL|method|tabPopupMenu ()
specifier|private
name|JPopupMenu
name|tabPopupMenu
parameter_list|()
block|{
name|JPopupMenu
name|popupMenu
init|=
operator|new
name|JPopupMenu
argument_list|()
decl_stmt|;
comment|// Close actions
name|JMenuItem
name|close
init|=
operator|new
name|JMenuItem
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Close"
argument_list|)
argument_list|)
decl_stmt|;
name|JMenuItem
name|closeOthers
init|=
operator|new
name|JMenuItem
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Close others"
argument_list|)
argument_list|)
decl_stmt|;
name|JMenuItem
name|closeAll
init|=
operator|new
name|JMenuItem
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Close all"
argument_list|)
argument_list|)
decl_stmt|;
name|close
operator|.
name|addActionListener
argument_list|(
name|closeDatabaseAction
argument_list|)
expr_stmt|;
name|closeOthers
operator|.
name|addActionListener
argument_list|(
name|closeOtherDatabasesAction
argument_list|)
expr_stmt|;
name|closeAll
operator|.
name|addActionListener
argument_list|(
name|closeAllDatabasesAction
argument_list|)
expr_stmt|;
name|popupMenu
operator|.
name|add
argument_list|(
name|close
argument_list|)
expr_stmt|;
name|popupMenu
operator|.
name|add
argument_list|(
name|closeOthers
argument_list|)
expr_stmt|;
name|popupMenu
operator|.
name|add
argument_list|(
name|closeAll
argument_list|)
expr_stmt|;
name|popupMenu
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|JMenuItem
name|databasePropertiesMenu
init|=
operator|new
name|JMenuItem
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Library properties"
argument_list|)
argument_list|)
decl_stmt|;
name|databasePropertiesMenu
operator|.
name|addActionListener
argument_list|(
name|this
operator|.
name|databaseProperties
argument_list|)
expr_stmt|;
name|popupMenu
operator|.
name|add
argument_list|(
name|databasePropertiesMenu
argument_list|)
expr_stmt|;
name|JMenuItem
name|bibtexKeyPatternBtn
init|=
operator|new
name|JMenuItem
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"BibTeX key patterns"
argument_list|)
argument_list|)
decl_stmt|;
name|bibtexKeyPatternBtn
operator|.
name|addActionListener
argument_list|(
name|bibtexKeyPattern
argument_list|)
expr_stmt|;
name|popupMenu
operator|.
name|add
argument_list|(
name|bibtexKeyPatternBtn
argument_list|)
expr_stmt|;
return|return
name|popupMenu
return|;
block|}
DECL|method|init ()
specifier|private
name|void
name|init
parameter_list|()
block|{
name|tabbedPane
operator|=
operator|new
name|DragDropPopupPane
argument_list|(
name|tabPopupMenu
argument_list|()
argument_list|)
expr_stmt|;
name|initSidePane
argument_list|()
expr_stmt|;
name|initLayout
argument_list|()
expr_stmt|;
name|initActions
argument_list|()
expr_stmt|;
comment|// Show the toolbar if it was visible at last shutdown:
name|tlb
operator|.
name|setVisible
argument_list|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|TOOLBAR_VISIBLE
argument_list|)
argument_list|)
expr_stmt|;
comment|//setBounds(GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds());
comment|//WindowLocation pw = new WindowLocation(this, JabRefPreferences.POS_X, JabRefPreferences.POS_Y, JabRefPreferences.SIZE_X,
comment|//        JabRefPreferences.SIZE_Y);
comment|//pw.displayWindowAtStoredLocation();
name|tabbedPane
operator|.
name|setBorder
argument_list|(
literal|null
argument_list|)
expr_stmt|;
name|tabbedPane
operator|.
name|setForeground
argument_list|(
name|GUIGlobals
operator|.
name|INACTIVE_TABBED_COLOR
argument_list|)
expr_stmt|;
comment|/*          * The following state listener makes sure focus is registered with the          * correct database when the user switches tabs. Without this,          * cut/paste/copy operations would some times occur in the wrong tab.          */
name|tabbedPane
operator|.
name|addChangeListener
argument_list|(
name|e
lambda|->
block|{
name|markActiveBasePanel
argument_list|()
expr_stmt|;
name|BasePanel
name|currentBasePanel
init|=
name|getCurrentBasePanel
argument_list|()
decl_stmt|;
if|if
condition|(
name|currentBasePanel
operator|==
literal|null
condition|)
block|{
return|return;
block|}
comment|// Poor-mans binding to global state
comment|// We need to invoke this in the JavaFX thread as all the listeners sit there
name|Platform
operator|.
name|runLater
argument_list|(
parameter_list|()
lambda|->
name|Globals
operator|.
name|stateManager
operator|.
name|activeDatabaseProperty
argument_list|()
operator|.
name|setValue
argument_list|(
name|Optional
operator|.
name|of
argument_list|(
name|currentBasePanel
operator|.
name|getBibDatabaseContext
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|new
name|SearchPreferences
argument_list|(
name|Globals
operator|.
name|prefs
argument_list|)
operator|.
name|isGlobalSearch
argument_list|()
condition|)
block|{
name|globalSearchBar
operator|.
name|performSearch
argument_list|()
expr_stmt|;
block|}
else|else
block|{
name|String
name|content
init|=
literal|""
decl_stmt|;
name|Optional
argument_list|<
name|SearchQuery
argument_list|>
name|currentSearchQuery
init|=
name|currentBasePanel
operator|.
name|getCurrentSearchQuery
argument_list|()
decl_stmt|;
if|if
condition|(
name|currentSearchQuery
operator|.
name|isPresent
argument_list|()
condition|)
block|{
name|content
operator|=
name|currentSearchQuery
operator|.
name|get
argument_list|()
operator|.
name|getQuery
argument_list|()
expr_stmt|;
block|}
name|globalSearchBar
operator|.
name|setSearchTerm
argument_list|(
name|content
argument_list|)
expr_stmt|;
block|}
name|currentBasePanel
operator|.
name|getPreviewPanel
argument_list|()
operator|.
name|updateLayout
argument_list|()
expr_stmt|;
name|groupSidePane
operator|.
name|getToggleAction
argument_list|()
operator|.
name|setSelected
argument_list|(
name|sidePaneManager
operator|.
name|isComponentVisible
argument_list|(
name|GroupSidePane
operator|.
name|class
argument_list|)
argument_list|)
expr_stmt|;
name|previewToggle
operator|.
name|setSelected
argument_list|(
name|Globals
operator|.
name|prefs
operator|.
name|getPreviewPreferences
argument_list|()
operator|.
name|isPreviewPanelEnabled
argument_list|()
argument_list|)
expr_stmt|;
name|generalFetcher
operator|.
name|getToggleAction
argument_list|()
operator|.
name|setSelected
argument_list|(
name|sidePaneManager
operator|.
name|isComponentVisible
argument_list|(
name|GeneralFetcher
operator|.
name|class
argument_list|)
argument_list|)
expr_stmt|;
name|openOfficePanel
operator|.
name|getToggleAction
argument_list|()
operator|.
name|setSelected
argument_list|(
name|sidePaneManager
operator|.
name|isComponentVisible
argument_list|(
name|OpenOfficeSidePanel
operator|.
name|class
argument_list|)
argument_list|)
expr_stmt|;
name|Globals
operator|.
name|getFocusListener
argument_list|()
operator|.
name|setFocused
argument_list|(
name|currentBasePanel
operator|.
name|getMainTable
argument_list|()
argument_list|)
expr_stmt|;
name|setWindowTitle
argument_list|()
expr_stmt|;
name|editModeAction
operator|.
name|initName
argument_list|()
expr_stmt|;
comment|// Update search autocompleter with information for the correct database:
name|currentBasePanel
operator|.
name|updateSearchManager
argument_list|()
expr_stmt|;
comment|// Set correct enabled state for Back and Forward actions:
name|currentBasePanel
operator|.
name|setBackAndForwardEnabledState
argument_list|()
expr_stmt|;
name|currentBasePanel
operator|.
name|getUndoManager
argument_list|()
operator|.
name|postUndoRedoEvent
argument_list|()
expr_stmt|;
name|currentBasePanel
operator|.
name|getMainTable
argument_list|()
operator|.
name|requestFocus
argument_list|()
expr_stmt|;
block|}
argument_list|)
expr_stmt|;
comment|//Note: The registration of Apple event is at the end of initialization, because
comment|//if the events happen too early (ie when the window is not initialized yet), the
comment|//opened (double-clicked) documents are not displayed.
if|if
condition|(
name|OS
operator|.
name|OS_X
condition|)
block|{
try|try
block|{
operator|new
name|MacAdapter
argument_list|()
operator|.
name|registerMacEvents
argument_list|(
name|this
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
name|LOGGER
operator|.
name|fatal
argument_list|(
literal|"Could not interface with Mac OS X methods."
argument_list|,
name|e
argument_list|)
expr_stmt|;
block|}
block|}
name|initShowTrackingNotification
argument_list|()
expr_stmt|;
block|}
DECL|method|initShowTrackingNotification ()
specifier|private
name|void
name|initShowTrackingNotification
parameter_list|()
block|{
if|if
condition|(
operator|!
name|Globals
operator|.
name|prefs
operator|.
name|shouldAskToCollectTelemetry
argument_list|()
condition|)
block|{
name|JabRefExecutorService
operator|.
name|INSTANCE
operator|.
name|submit
argument_list|(
operator|new
name|TimerTask
argument_list|()
block|{
annotation|@
name|Override
specifier|public
name|void
name|run
parameter_list|()
block|{
name|SwingUtilities
operator|.
name|invokeLater
argument_list|(
parameter_list|()
lambda|->
block|{
name|DefaultTaskExecutor
operator|.
name|runInJavaFXThread
argument_list|(
name|JabRefFrame
operator|.
name|this
operator|::
name|showTrackingNotification
argument_list|)
expr_stmt|;
block|}
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|,
literal|60000
argument_list|)
expr_stmt|;
comment|// run in one minute
block|}
block|}
DECL|method|showTrackingNotification ()
specifier|private
name|Void
name|showTrackingNotification
parameter_list|()
block|{
if|if
condition|(
operator|!
name|Globals
operator|.
name|prefs
operator|.
name|shouldCollectTelemetry
argument_list|()
condition|)
block|{
name|DialogService
name|dialogService
init|=
operator|new
name|FXDialogService
argument_list|()
decl_stmt|;
name|boolean
name|shouldCollect
init|=
name|dialogService
operator|.
name|showConfirmationDialogAndWait
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Telemetry: Help make JabRef better"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"To improve the user experience, we would like to collect anonymous statistics on the features you use. We will only record what features you access and how often you do it. We will neither collect any personal data nor the content of bibliographic items. If you choose to allow data collection, you can later disable it via Options -> Preferences -> General."
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Share anonymous statistics"
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Don't share"
argument_list|)
argument_list|)
decl_stmt|;
name|Globals
operator|.
name|prefs
operator|.
name|setShouldCollectTelemetry
argument_list|(
name|shouldCollect
argument_list|)
expr_stmt|;
block|}
name|Globals
operator|.
name|prefs
operator|.
name|askedToCollectTelemetry
argument_list|()
expr_stmt|;
return|return
literal|null
return|;
block|}
DECL|method|refreshTitleAndTabs ()
specifier|public
name|void
name|refreshTitleAndTabs
parameter_list|()
block|{
name|setWindowTitle
argument_list|()
expr_stmt|;
name|updateAllTabTitles
argument_list|()
expr_stmt|;
block|}
comment|/**      * Sets the title of the main window.      */
DECL|method|setWindowTitle ()
specifier|public
name|void
name|setWindowTitle
parameter_list|()
block|{
name|BasePanel
name|panel
init|=
name|getCurrentBasePanel
argument_list|()
decl_stmt|;
comment|// no database open
if|if
condition|(
name|panel
operator|==
literal|null
condition|)
block|{
comment|//setTitle(FRAME_TITLE);
return|return;
block|}
name|String
name|mode
init|=
name|panel
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getMode
argument_list|()
operator|.
name|getFormattedName
argument_list|()
decl_stmt|;
name|String
name|modeInfo
init|=
name|String
operator|.
name|format
argument_list|(
literal|" (%s)"
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"%0 mode"
argument_list|,
name|mode
argument_list|)
argument_list|)
decl_stmt|;
name|boolean
name|isAutosaveEnabled
init|=
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|LOCAL_AUTO_SAVE
argument_list|)
decl_stmt|;
if|if
condition|(
name|panel
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getLocation
argument_list|()
operator|==
name|DatabaseLocation
operator|.
name|LOCAL
condition|)
block|{
name|String
name|changeFlag
init|=
name|panel
operator|.
name|isModified
argument_list|()
operator|&&
operator|!
name|isAutosaveEnabled
condition|?
literal|"*"
else|:
literal|""
decl_stmt|;
name|String
name|databaseFile
init|=
name|panel
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getDatabaseFile
argument_list|()
operator|.
name|map
argument_list|(
name|File
operator|::
name|getPath
argument_list|)
operator|.
name|orElse
argument_list|(
name|GUIGlobals
operator|.
name|UNTITLED_TITLE
argument_list|)
decl_stmt|;
comment|//setTitle(FRAME_TITLE + " - " + databaseFile + changeFlag + modeInfo);
block|}
elseif|else
if|if
condition|(
name|panel
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getLocation
argument_list|()
operator|==
name|DatabaseLocation
operator|.
name|SHARED
condition|)
block|{
comment|//setTitle(FRAME_TITLE + " - " + panel.getBibDatabaseContext().getDBMSSynchronizer().getDBName() + " ["
comment|//        + Localization.lang("shared") + "]" + modeInfo);
block|}
block|}
DECL|method|initSidePane ()
specifier|private
name|void
name|initSidePane
parameter_list|()
block|{
name|sidePaneManager
operator|=
operator|new
name|SidePaneManager
argument_list|(
name|this
argument_list|)
expr_stmt|;
name|groupSidePane
operator|=
operator|new
name|GroupSidePane
argument_list|(
name|this
argument_list|,
name|sidePaneManager
argument_list|)
expr_stmt|;
name|openOfficePanel
operator|=
operator|new
name|OpenOfficePanel
argument_list|(
name|this
argument_list|,
name|sidePaneManager
argument_list|)
expr_stmt|;
name|generalFetcher
operator|=
operator|new
name|GeneralFetcher
argument_list|(
name|this
argument_list|,
name|sidePaneManager
argument_list|)
expr_stmt|;
name|sidePaneManager
operator|.
name|register
argument_list|(
name|groupSidePane
argument_list|)
expr_stmt|;
block|}
comment|/**      * The MacAdapter calls this method when a "BIB" file has been double-clicked from the Finder.      */
DECL|method|openAction (String filePath)
specifier|public
name|void
name|openAction
parameter_list|(
name|String
name|filePath
parameter_list|)
block|{
name|Path
name|file
init|=
name|Paths
operator|.
name|get
argument_list|(
name|filePath
argument_list|)
decl_stmt|;
comment|// all the logic is done in openIt. Even raising an existing panel
name|getOpenDatabaseAction
argument_list|()
operator|.
name|openFile
argument_list|(
name|file
argument_list|,
literal|true
argument_list|)
expr_stmt|;
block|}
comment|// General info dialog.  The MacAdapter calls this method when "About"
comment|// is selected from the application menu.
DECL|method|about ()
specifier|public
name|void
name|about
parameter_list|()
block|{
comment|// reuse the normal about action
comment|// null as parameter is OK as the code of actionPerformed does not rely on the data sent in the event.
name|about
operator|.
name|actionPerformed
argument_list|(
literal|null
argument_list|)
expr_stmt|;
block|}
comment|// General preferences dialog.  The MacAdapter calls this method when "Preferences..."
comment|// is selected from the application menu.
DECL|method|showPreferencesDialog ()
specifier|public
name|void
name|showPreferencesDialog
parameter_list|()
block|{
name|output
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Opening preferences..."
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|prefsDialog
operator|==
literal|null
condition|)
block|{
name|prefsDialog
operator|=
operator|new
name|PreferencesDialog
argument_list|(
name|JabRefFrame
operator|.
name|this
argument_list|)
expr_stmt|;
comment|//prefsDialog.setLocationRelativeTo(JabRefFrame.this);
block|}
else|else
block|{
name|prefsDialog
operator|.
name|setValues
argument_list|()
expr_stmt|;
block|}
name|prefsDialog
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|output
argument_list|(
literal|""
argument_list|)
expr_stmt|;
block|}
DECL|method|prefs ()
specifier|public
name|JabRefPreferences
name|prefs
parameter_list|()
block|{
return|return
name|prefs
return|;
block|}
comment|/**      * Tears down all things started by JabRef      *<p>      * FIXME: Currently some threads remain and therefore hinder JabRef to be closed properly      *      * @param filenames the filenames of all currently opened files - used for storing them if prefs openLastEdited is set to true      */
DECL|method|tearDownJabRef (List<String> filenames)
specifier|private
name|void
name|tearDownJabRef
parameter_list|(
name|List
argument_list|<
name|String
argument_list|>
name|filenames
parameter_list|)
block|{
name|Globals
operator|.
name|stopBackgroundTasks
argument_list|()
expr_stmt|;
name|Globals
operator|.
name|shutdownThreadPools
argument_list|()
expr_stmt|;
comment|//dispose();
comment|//prefs.putBoolean(JabRefPreferences.WINDOW_MAXIMISED, getExtendedState() == Frame.MAXIMIZED_BOTH);
name|prefs
operator|.
name|putBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|TOOLBAR_VISIBLE
argument_list|,
name|tlb
operator|.
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
comment|// Store divider location for side pane:
name|double
name|width
init|=
name|splitPane
operator|.
name|getDividerPositions
argument_list|()
index|[
literal|0
index|]
decl_stmt|;
if|if
condition|(
name|width
operator|>
literal|0
condition|)
block|{
name|prefs
operator|.
name|putDouble
argument_list|(
name|JabRefPreferences
operator|.
name|SIDE_PANE_WIDTH
argument_list|,
name|width
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|OPEN_LAST_EDITED
argument_list|)
condition|)
block|{
comment|// Here we store the names of all current files. If
comment|// there is no current file, we remove any
comment|// previously stored filename.
if|if
condition|(
name|filenames
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|prefs
operator|.
name|remove
argument_list|(
name|JabRefPreferences
operator|.
name|LAST_EDITED
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|prefs
operator|.
name|putStringList
argument_list|(
name|JabRefPreferences
operator|.
name|LAST_EDITED
argument_list|,
name|filenames
argument_list|)
expr_stmt|;
name|File
name|focusedDatabase
init|=
name|getCurrentBasePanel
argument_list|()
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getDatabaseFile
argument_list|()
operator|.
name|orElse
argument_list|(
literal|null
argument_list|)
decl_stmt|;
operator|new
name|LastFocusedTabPreferences
argument_list|(
name|prefs
argument_list|)
operator|.
name|setLastFocusedTab
argument_list|(
name|focusedDatabase
argument_list|)
expr_stmt|;
block|}
block|}
name|fileHistory
operator|.
name|storeHistory
argument_list|()
expr_stmt|;
name|prefs
operator|.
name|customExports
operator|.
name|store
argument_list|(
name|Globals
operator|.
name|prefs
argument_list|)
expr_stmt|;
name|prefs
operator|.
name|customImports
operator|.
name|store
argument_list|()
expr_stmt|;
name|prefs
operator|.
name|flush
argument_list|()
expr_stmt|;
comment|// dispose all windows, even if they are not displayed anymore
for|for
control|(
name|Window
name|window
range|:
name|Window
operator|.
name|getWindows
argument_list|()
control|)
block|{
name|window
operator|.
name|dispose
argument_list|()
expr_stmt|;
block|}
block|}
comment|/**      * General info dialog.  The MacAdapter calls this method when "Quit"      * is selected from the application menu, Cmd-Q is pressed, or "Quit" is selected from the Dock.      * The function returns a boolean indicating if quitting is ok or not.      *<p>      * Non-OSX JabRef calls this when choosing "Quit" from the menu      *<p>      * SIDE EFFECT: tears down JabRef      *      * @return true if the user chose to quit; false otherwise      */
DECL|method|quit ()
specifier|public
name|boolean
name|quit
parameter_list|()
block|{
comment|// Ask here if the user really wants to close, if the base
comment|// has not been saved since last save.
name|boolean
name|close
init|=
literal|true
decl_stmt|;
name|List
argument_list|<
name|String
argument_list|>
name|filenames
init|=
operator|new
name|ArrayList
argument_list|<>
argument_list|()
decl_stmt|;
if|if
condition|(
name|tabbedPane
operator|.
name|getTabCount
argument_list|()
operator|>
literal|0
condition|)
block|{
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|tabbedPane
operator|.
name|getTabCount
argument_list|()
condition|;
name|i
operator|++
control|)
block|{
name|BibDatabaseContext
name|context
init|=
name|getBasePanelAt
argument_list|(
name|i
argument_list|)
operator|.
name|getBibDatabaseContext
argument_list|()
decl_stmt|;
if|if
condition|(
name|getBasePanelAt
argument_list|(
name|i
argument_list|)
operator|.
name|isModified
argument_list|()
operator|&&
operator|(
name|context
operator|.
name|getLocation
argument_list|()
operator|==
name|DatabaseLocation
operator|.
name|LOCAL
operator|)
condition|)
block|{
name|tabbedPane
operator|.
name|setSelectedIndex
argument_list|(
name|i
argument_list|)
expr_stmt|;
name|String
name|filename
init|=
name|context
operator|.
name|getDatabaseFile
argument_list|()
operator|.
name|map
argument_list|(
name|File
operator|::
name|getAbsolutePath
argument_list|)
operator|.
name|orElse
argument_list|(
name|GUIGlobals
operator|.
name|UNTITLED_TITLE
argument_list|)
decl_stmt|;
name|int
name|answer
init|=
name|showSaveDialog
argument_list|(
name|filename
argument_list|)
decl_stmt|;
if|if
condition|(
operator|(
name|answer
operator|==
name|JOptionPane
operator|.
name|CANCEL_OPTION
operator|)
operator|||
operator|(
name|answer
operator|==
name|JOptionPane
operator|.
name|CLOSED_OPTION
operator|)
condition|)
block|{
return|return
literal|false
return|;
block|}
if|if
condition|(
name|answer
operator|==
name|JOptionPane
operator|.
name|YES_OPTION
condition|)
block|{
comment|// The user wants to save.
try|try
block|{
comment|//getCurrentBasePanel().runCommand("save");
name|SaveDatabaseAction
name|saveAction
init|=
operator|new
name|SaveDatabaseAction
argument_list|(
name|getCurrentBasePanel
argument_list|()
argument_list|)
decl_stmt|;
name|saveAction
operator|.
name|runCommand
argument_list|()
expr_stmt|;
if|if
condition|(
name|saveAction
operator|.
name|isCanceled
argument_list|()
operator|||
operator|!
name|saveAction
operator|.
name|isSuccess
argument_list|()
condition|)
block|{
comment|// The action was either canceled or unsuccessful.
comment|// Break!
name|output
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Unable to save library"
argument_list|)
argument_list|)
expr_stmt|;
name|close
operator|=
literal|false
expr_stmt|;
block|}
block|}
catch|catch
parameter_list|(
name|Throwable
name|ex
parameter_list|)
block|{
comment|// Something prevented the file
comment|// from being saved. Break!!!
name|close
operator|=
literal|false
expr_stmt|;
break|break;
block|}
block|}
block|}
elseif|else
if|if
condition|(
name|context
operator|.
name|getLocation
argument_list|()
operator|==
name|DatabaseLocation
operator|.
name|SHARED
condition|)
block|{
name|context
operator|.
name|convertToLocalDatabase
argument_list|()
expr_stmt|;
name|context
operator|.
name|getDBMSSynchronizer
argument_list|()
operator|.
name|closeSharedDatabase
argument_list|()
expr_stmt|;
name|context
operator|.
name|clearDBMSSynchronizer
argument_list|()
expr_stmt|;
block|}
name|AutosaveManager
operator|.
name|shutdown
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|BackupManager
operator|.
name|shutdown
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|context
operator|.
name|getDatabaseFile
argument_list|()
operator|.
name|map
argument_list|(
name|File
operator|::
name|getAbsolutePath
argument_list|)
operator|.
name|ifPresent
argument_list|(
name|filenames
operator|::
name|add
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|close
condition|)
block|{
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|tabbedPane
operator|.
name|getTabCount
argument_list|()
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|getBasePanelAt
argument_list|(
name|i
argument_list|)
operator|.
name|isSaving
argument_list|()
condition|)
block|{
comment|// There is a database still being saved, so we need to wait.
name|WaitForSaveOperation
name|w
init|=
operator|new
name|WaitForSaveOperation
argument_list|(
name|this
argument_list|)
decl_stmt|;
name|w
operator|.
name|show
argument_list|()
expr_stmt|;
comment|// This method won't return until canceled or the save operation is done.
if|if
condition|(
name|w
operator|.
name|canceled
argument_list|()
condition|)
block|{
return|return
literal|false
return|;
comment|// The user clicked cancel.
block|}
block|}
block|}
name|tearDownJabRef
argument_list|(
name|filenames
argument_list|)
expr_stmt|;
return|return
literal|true
return|;
block|}
return|return
literal|false
return|;
block|}
DECL|method|initLayout ()
specifier|private
name|void
name|initLayout
parameter_list|()
block|{
name|tabbedPane
operator|.
name|putClientProperty
argument_list|(
name|Options
operator|.
name|NO_CONTENT_BORDER_KEY
argument_list|,
name|Boolean
operator|.
name|TRUE
argument_list|)
expr_stmt|;
name|setProgressBarVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|pushApplications
operator|=
operator|new
name|PushToApplications
argument_list|()
expr_stmt|;
name|pushExternalButton
operator|=
operator|new
name|PushToApplicationButton
argument_list|(
name|this
argument_list|,
name|pushApplications
operator|.
name|getApplications
argument_list|()
argument_list|)
expr_stmt|;
name|fillMenu
argument_list|()
expr_stmt|;
name|createToolBar
argument_list|()
expr_stmt|;
comment|//setJMenuBar(mb);
comment|//getContentPane().setLayout(new BorderLayout());
name|JPanel
name|toolbarPanel
init|=
operator|new
name|JPanel
argument_list|(
operator|new
name|WrapLayout
argument_list|(
name|FlowLayout
operator|.
name|LEFT
argument_list|)
argument_list|)
decl_stmt|;
name|toolbarPanel
operator|.
name|add
argument_list|(
name|tlb
argument_list|)
expr_stmt|;
name|toolbarPanel
operator|.
name|add
argument_list|(
name|globalSearchBar
argument_list|)
expr_stmt|;
comment|//getContentPane().add(toolbarPanel, BorderLayout.PAGE_START);
comment|//splitPane.setDividerSize(2);
comment|//splitPane.setBorder(null);
name|setCenter
argument_list|(
name|splitPane
argument_list|)
expr_stmt|;
name|StackPane
name|header
init|=
operator|new
name|StackPane
argument_list|()
decl_stmt|;
name|header
operator|.
name|setId
argument_list|(
literal|"header"
argument_list|)
expr_stmt|;
name|header
operator|.
name|setPrefHeight
argument_list|(
literal|50
argument_list|)
expr_stmt|;
name|header
operator|.
name|setStyle
argument_list|(
literal|"-fx-background-color: #4d4674; -fx-text-fill: white;"
argument_list|)
expr_stmt|;
name|setTop
argument_list|(
name|header
argument_list|)
expr_stmt|;
name|SwingNode
name|swingTabbedPane
init|=
operator|new
name|SwingNode
argument_list|()
decl_stmt|;
name|SwingNode
name|swingSidePane
init|=
operator|new
name|SwingNode
argument_list|()
decl_stmt|;
name|SwingUtilities
operator|.
name|invokeLater
argument_list|(
parameter_list|()
lambda|->
block|{
name|swingTabbedPane
operator|.
name|setContent
argument_list|(
name|tabbedPane
argument_list|)
expr_stmt|;
name|swingSidePane
operator|.
name|setContent
argument_list|(
name|sidePaneManager
operator|.
name|getPanel
argument_list|()
argument_list|)
expr_stmt|;
block|}
argument_list|)
expr_stmt|;
name|StackPane
name|centerPane
init|=
operator|new
name|StackPane
argument_list|()
decl_stmt|;
name|centerPane
operator|.
name|getChildren
argument_list|()
operator|.
name|addAll
argument_list|(
name|swingTabbedPane
argument_list|,
operator|new
name|Button
argument_list|(
literal|"test"
argument_list|)
argument_list|)
expr_stmt|;
name|splitPane
operator|.
name|getItems
argument_list|()
operator|.
name|addAll
argument_list|(
name|swingSidePane
argument_list|,
name|swingTabbedPane
argument_list|)
expr_stmt|;
name|UIManager
operator|.
name|put
argument_list|(
literal|"TabbedPane.contentBorderInsets"
argument_list|,
operator|new
name|Insets
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|sidePaneManager
operator|.
name|updateView
argument_list|()
expr_stmt|;
name|GridBagLayout
name|gbl
init|=
operator|new
name|GridBagLayout
argument_list|()
decl_stmt|;
name|GridBagConstraints
name|con
init|=
operator|new
name|GridBagConstraints
argument_list|()
decl_stmt|;
name|con
operator|.
name|fill
operator|=
name|GridBagConstraints
operator|.
name|BOTH
expr_stmt|;
name|con
operator|.
name|anchor
operator|=
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|JPanel
name|status
init|=
operator|new
name|JPanel
argument_list|()
decl_stmt|;
name|status
operator|.
name|setLayout
argument_list|(
name|gbl
argument_list|)
expr_stmt|;
name|con
operator|.
name|weighty
operator|=
literal|0
expr_stmt|;
name|con
operator|.
name|weightx
operator|=
literal|0
expr_stmt|;
name|con
operator|.
name|gridwidth
operator|=
literal|1
expr_stmt|;
name|con
operator|.
name|insets
operator|=
operator|new
name|Insets
argument_list|(
literal|0
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gbl
operator|.
name|setConstraints
argument_list|(
name|statusLabel
argument_list|,
name|con
argument_list|)
expr_stmt|;
name|status
operator|.
name|add
argument_list|(
name|statusLabel
argument_list|)
expr_stmt|;
name|con
operator|.
name|weightx
operator|=
literal|1
expr_stmt|;
name|con
operator|.
name|insets
operator|=
operator|new
name|Insets
argument_list|(
literal|0
argument_list|,
literal|4
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|con
operator|.
name|gridwidth
operator|=
literal|1
expr_stmt|;
name|gbl
operator|.
name|setConstraints
argument_list|(
name|statusLine
argument_list|,
name|con
argument_list|)
expr_stmt|;
name|status
operator|.
name|add
argument_list|(
name|statusLine
argument_list|)
expr_stmt|;
name|con
operator|.
name|weightx
operator|=
literal|0
expr_stmt|;
name|con
operator|.
name|gridwidth
operator|=
name|GridBagConstraints
operator|.
name|REMAINDER
expr_stmt|;
name|con
operator|.
name|insets
operator|=
operator|new
name|Insets
argument_list|(
literal|2
argument_list|,
literal|4
argument_list|,
literal|2
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gbl
operator|.
name|setConstraints
argument_list|(
name|progressBar
argument_list|,
name|con
argument_list|)
expr_stmt|;
name|status
operator|.
name|add
argument_list|(
name|progressBar
argument_list|)
expr_stmt|;
name|statusLabel
operator|.
name|setForeground
argument_list|(
name|GUIGlobals
operator|.
name|ENTRY_EDITOR_LABEL_COLOR
operator|.
name|darker
argument_list|()
argument_list|)
expr_stmt|;
comment|//getContentPane().add(status, BorderLayout.PAGE_END);
comment|// Drag and drop for tabbedPane:
name|TransferHandler
name|xfer
init|=
operator|new
name|EntryTableTransferHandler
argument_list|(
literal|null
argument_list|,
name|this
argument_list|,
literal|null
argument_list|)
decl_stmt|;
name|tabbedPane
operator|.
name|setTransferHandler
argument_list|(
name|xfer
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|setTransferHandler
argument_list|(
name|xfer
argument_list|)
expr_stmt|;
name|mb
operator|.
name|setTransferHandler
argument_list|(
name|xfer
argument_list|)
expr_stmt|;
name|sidePaneManager
operator|.
name|getPanel
argument_list|()
operator|.
name|setTransferHandler
argument_list|(
name|xfer
argument_list|)
expr_stmt|;
block|}
comment|/**      * Returns the indexed BasePanel.      *      * @param i Index of base      */
DECL|method|getBasePanelAt (int i)
specifier|public
name|BasePanel
name|getBasePanelAt
parameter_list|(
name|int
name|i
parameter_list|)
block|{
return|return
operator|(
name|BasePanel
operator|)
name|tabbedPane
operator|.
name|getComponentAt
argument_list|(
name|i
argument_list|)
return|;
block|}
comment|/**      * Returns a list of BasePanel.      *      */
DECL|method|getBasePanelList ()
specifier|public
name|List
argument_list|<
name|BasePanel
argument_list|>
name|getBasePanelList
parameter_list|()
block|{
name|List
argument_list|<
name|BasePanel
argument_list|>
name|returnList
init|=
operator|new
name|ArrayList
argument_list|<>
argument_list|()
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|getBasePanelCount
argument_list|()
condition|;
name|i
operator|++
control|)
block|{
name|returnList
operator|.
name|add
argument_list|(
operator|(
name|BasePanel
operator|)
name|tabbedPane
operator|.
name|getComponentAt
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
block|}
return|return
name|returnList
return|;
block|}
DECL|method|showBasePanelAt (int i)
specifier|public
name|void
name|showBasePanelAt
parameter_list|(
name|int
name|i
parameter_list|)
block|{
name|tabbedPane
operator|.
name|setSelectedIndex
argument_list|(
name|i
argument_list|)
expr_stmt|;
block|}
DECL|method|showBasePanel (BasePanel bp)
specifier|public
name|void
name|showBasePanel
parameter_list|(
name|BasePanel
name|bp
parameter_list|)
block|{
name|tabbedPane
operator|.
name|setSelectedComponent
argument_list|(
name|bp
argument_list|)
expr_stmt|;
block|}
comment|/**      * Returns the currently viewed BasePanel.      */
DECL|method|getCurrentBasePanel ()
specifier|public
name|BasePanel
name|getCurrentBasePanel
parameter_list|()
block|{
if|if
condition|(
name|tabbedPane
operator|==
literal|null
condition|)
block|{
return|return
literal|null
return|;
block|}
return|return
operator|(
name|BasePanel
operator|)
name|tabbedPane
operator|.
name|getSelectedComponent
argument_list|()
return|;
block|}
comment|/**      * @return the BasePanel count.      */
DECL|method|getBasePanelCount ()
specifier|public
name|int
name|getBasePanelCount
parameter_list|()
block|{
return|return
name|tabbedPane
operator|.
name|getComponentCount
argument_list|()
return|;
block|}
comment|/**      * handle the color of active and inactive JTabbedPane tabs      */
DECL|method|markActiveBasePanel ()
specifier|private
name|void
name|markActiveBasePanel
parameter_list|()
block|{
name|int
name|now
init|=
name|tabbedPane
operator|.
name|getSelectedIndex
argument_list|()
decl_stmt|;
name|int
name|len
init|=
name|tabbedPane
operator|.
name|getTabCount
argument_list|()
decl_stmt|;
if|if
condition|(
operator|(
name|lastTabbedPanelSelectionIndex
operator|>
operator|-
literal|1
operator|)
operator|&&
operator|(
name|lastTabbedPanelSelectionIndex
operator|<
name|len
operator|)
condition|)
block|{
name|tabbedPane
operator|.
name|setForegroundAt
argument_list|(
name|lastTabbedPanelSelectionIndex
argument_list|,
name|GUIGlobals
operator|.
name|INACTIVE_TABBED_COLOR
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|now
operator|>
operator|-
literal|1
operator|)
operator|&&
operator|(
name|now
operator|<
name|len
operator|)
condition|)
block|{
name|tabbedPane
operator|.
name|setForegroundAt
argument_list|(
name|now
argument_list|,
name|GUIGlobals
operator|.
name|ACTIVE_TABBED_COLOR
argument_list|)
expr_stmt|;
block|}
name|lastTabbedPanelSelectionIndex
operator|=
name|now
expr_stmt|;
block|}
DECL|method|getTabIndex (JComponent comp)
specifier|private
name|int
name|getTabIndex
parameter_list|(
name|JComponent
name|comp
parameter_list|)
block|{
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|tabbedPane
operator|.
name|getTabCount
argument_list|()
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|tabbedPane
operator|.
name|getComponentAt
argument_list|(
name|i
argument_list|)
operator|==
name|comp
condition|)
block|{
return|return
name|i
return|;
block|}
block|}
return|return
operator|-
literal|1
return|;
block|}
DECL|method|getTabbedPane ()
specifier|public
name|JTabbedPane
name|getTabbedPane
parameter_list|()
block|{
return|return
name|tabbedPane
return|;
block|}
DECL|method|setTabTitle (JComponent comp, String title, String toolTip)
specifier|public
name|void
name|setTabTitle
parameter_list|(
name|JComponent
name|comp
parameter_list|,
name|String
name|title
parameter_list|,
name|String
name|toolTip
parameter_list|)
block|{
name|int
name|index
init|=
name|getTabIndex
argument_list|(
name|comp
argument_list|)
decl_stmt|;
name|tabbedPane
operator|.
name|setTitleAt
argument_list|(
name|index
argument_list|,
name|title
argument_list|)
expr_stmt|;
name|tabbedPane
operator|.
name|setToolTipTextAt
argument_list|(
name|index
argument_list|,
name|toolTip
argument_list|)
expr_stmt|;
block|}
DECL|method|fillMenu ()
specifier|private
name|void
name|fillMenu
parameter_list|()
block|{
name|mb
operator|.
name|setBorder
argument_list|(
literal|null
argument_list|)
expr_stmt|;
name|JMenu
name|file
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"File"
argument_list|)
argument_list|)
decl_stmt|;
name|JMenu
name|edit
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Edit"
argument_list|)
argument_list|)
decl_stmt|;
name|JMenu
name|search
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Search"
argument_list|)
argument_list|)
decl_stmt|;
name|JMenu
name|groups
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Groups"
argument_list|)
argument_list|)
decl_stmt|;
name|JMenu
name|bibtex
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
literal|"&BibTeX"
argument_list|)
decl_stmt|;
name|JMenu
name|quality
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Quality"
argument_list|)
argument_list|)
decl_stmt|;
name|JMenu
name|view
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"View"
argument_list|)
argument_list|)
decl_stmt|;
name|JMenu
name|tools
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Tools"
argument_list|)
argument_list|)
decl_stmt|;
name|JMenu
name|options
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Options"
argument_list|)
argument_list|)
decl_stmt|;
name|newSpec
operator|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"New entry by type..."
argument_list|)
argument_list|)
expr_stmt|;
name|JMenu
name|helpMenu
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Help"
argument_list|)
argument_list|)
decl_stmt|;
name|file
operator|.
name|add
argument_list|(
name|newBibtexDatabaseAction
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|newBiblatexDatabaseAction
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|getOpenDatabaseAction
argument_list|()
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|mergeDatabaseAction
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|save
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|saveAs
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|saveAll
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|saveSelectedAs
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|saveSelectedAsPlain
argument_list|)
expr_stmt|;
name|file
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|importNew
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|importCurrent
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|exportAll
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|exportSelected
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|exportLinkedFiles
argument_list|)
expr_stmt|;
name|file
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|connectToSharedDatabaseAction
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|pullChangesFromSharedDatabase
argument_list|)
expr_stmt|;
name|file
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|databaseProperties
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|editModeAction
argument_list|)
expr_stmt|;
name|file
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|fileHistory
argument_list|)
expr_stmt|;
name|file
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|closeDatabaseAction
argument_list|)
expr_stmt|;
name|file
operator|.
name|add
argument_list|(
name|quit
argument_list|)
expr_stmt|;
name|mb
operator|.
name|add
argument_list|(
name|file
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|undo
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|redo
argument_list|)
expr_stmt|;
name|edit
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|cut
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|copy
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|paste
argument_list|)
expr_stmt|;
name|edit
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|copyTitle
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|copyKey
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|copyCiteKey
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|copyKeyAndTitle
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|copyKeyAndLink
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|copyPreview
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|exportToClipboard
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|sendAsEmail
argument_list|)
expr_stmt|;
name|edit
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|mark
argument_list|)
expr_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|EntryMarker
operator|.
name|MAX_MARKING_LEVEL
condition|;
name|i
operator|++
control|)
block|{
name|markSpecific
operator|.
name|add
argument_list|(
operator|new
name|MarkEntriesAction
argument_list|(
name|this
argument_list|,
name|i
argument_list|)
operator|.
name|getMenuItem
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|edit
operator|.
name|add
argument_list|(
name|markSpecific
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|unmark
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|unmarkAll
argument_list|)
expr_stmt|;
name|edit
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SPECIALFIELDSENABLED
argument_list|)
condition|)
block|{
name|boolean
name|menuitem
init|=
literal|false
decl_stmt|;
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_RANKING
argument_list|)
condition|)
block|{
name|rankSubMenu
operator|=
operator|new
name|JMenu
argument_list|()
expr_stmt|;
name|RightClickMenu
operator|.
name|populateSpecialFieldMenu
argument_list|(
name|rankSubMenu
argument_list|,
name|SpecialField
operator|.
name|RANKING
argument_list|,
name|this
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|rankSubMenu
argument_list|)
expr_stmt|;
name|menuitem
operator|=
literal|true
expr_stmt|;
block|}
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_RELEVANCE
argument_list|)
condition|)
block|{
name|edit
operator|.
name|add
argument_list|(
name|toggleRelevance
argument_list|)
expr_stmt|;
name|menuitem
operator|=
literal|true
expr_stmt|;
block|}
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_QUALITY
argument_list|)
condition|)
block|{
name|edit
operator|.
name|add
argument_list|(
name|toggleQualityAssured
argument_list|)
expr_stmt|;
name|menuitem
operator|=
literal|true
expr_stmt|;
block|}
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_PRIORITY
argument_list|)
condition|)
block|{
name|rankSubMenu
operator|=
operator|new
name|JMenu
argument_list|()
expr_stmt|;
name|RightClickMenu
operator|.
name|populateSpecialFieldMenu
argument_list|(
name|rankSubMenu
argument_list|,
name|SpecialField
operator|.
name|PRIORITY
argument_list|,
name|this
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|rankSubMenu
argument_list|)
expr_stmt|;
name|menuitem
operator|=
literal|true
expr_stmt|;
block|}
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_PRINTED
argument_list|)
condition|)
block|{
name|edit
operator|.
name|add
argument_list|(
name|togglePrinted
argument_list|)
expr_stmt|;
name|menuitem
operator|=
literal|true
expr_stmt|;
block|}
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_READ
argument_list|)
condition|)
block|{
name|rankSubMenu
operator|=
operator|new
name|JMenu
argument_list|()
expr_stmt|;
name|RightClickMenu
operator|.
name|populateSpecialFieldMenu
argument_list|(
name|rankSubMenu
argument_list|,
name|SpecialField
operator|.
name|READ_STATUS
argument_list|,
name|this
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|rankSubMenu
argument_list|)
expr_stmt|;
name|menuitem
operator|=
literal|true
expr_stmt|;
block|}
if|if
condition|(
name|menuitem
condition|)
block|{
name|edit
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
block|}
block|}
name|edit
operator|.
name|add
argument_list|(
name|getManageKeywords
argument_list|()
argument_list|)
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|getMassSetField
argument_list|()
argument_list|)
expr_stmt|;
name|edit
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|edit
operator|.
name|add
argument_list|(
name|selectAll
argument_list|)
expr_stmt|;
name|mb
operator|.
name|add
argument_list|(
name|edit
argument_list|)
expr_stmt|;
name|search
operator|.
name|add
argument_list|(
name|normalSearch
argument_list|)
expr_stmt|;
name|search
operator|.
name|add
argument_list|(
name|replaceAll
argument_list|)
expr_stmt|;
name|search
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|search
operator|.
name|add
argument_list|(
operator|new
name|JCheckBoxMenuItem
argument_list|(
name|generalFetcher
operator|.
name|getToggleAction
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|WEB_SEARCH_VISIBLE
argument_list|)
condition|)
block|{
name|sidePaneManager
operator|.
name|register
argument_list|(
name|generalFetcher
argument_list|)
expr_stmt|;
name|sidePaneManager
operator|.
name|show
argument_list|(
name|GeneralFetcher
operator|.
name|class
argument_list|)
expr_stmt|;
block|}
name|mb
operator|.
name|add
argument_list|(
name|search
argument_list|)
expr_stmt|;
name|groups
operator|.
name|add
argument_list|(
operator|new
name|JCheckBoxMenuItem
argument_list|(
name|groupSidePane
operator|.
name|getToggleAction
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|GROUP_SIDEPANE_VISIBLE
argument_list|)
condition|)
block|{
name|sidePaneManager
operator|.
name|register
argument_list|(
name|groupSidePane
argument_list|)
expr_stmt|;
name|sidePaneManager
operator|.
name|show
argument_list|(
name|GroupSidePane
operator|.
name|class
argument_list|)
expr_stmt|;
block|}
name|groups
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|groups
operator|.
name|add
argument_list|(
name|addToGroup
argument_list|)
expr_stmt|;
name|groups
operator|.
name|add
argument_list|(
name|removeFromGroup
argument_list|)
expr_stmt|;
name|groups
operator|.
name|add
argument_list|(
name|moveToGroup
argument_list|)
expr_stmt|;
name|mb
operator|.
name|add
argument_list|(
name|groups
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|getBackAction
argument_list|()
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|getForwardAction
argument_list|()
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|focusTable
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|nextTab
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|prevTab
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|sortTabs
argument_list|)
expr_stmt|;
name|view
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|increaseFontSize
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|decreseFontSize
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|defaultFontSize
argument_list|)
expr_stmt|;
name|view
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
operator|new
name|JCheckBoxMenuItem
argument_list|(
name|toggleToolbar
argument_list|)
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
operator|new
name|JCheckBoxMenuItem
argument_list|(
name|enableToggle
argument_list|(
name|generalFetcher
operator|.
name|getToggleAction
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
operator|new
name|JCheckBoxMenuItem
argument_list|(
name|groupSidePane
operator|.
name|getToggleAction
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
operator|new
name|JCheckBoxMenuItem
argument_list|(
name|togglePreview
argument_list|)
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|showPdvViewer
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|getNextPreviewStyleAction
argument_list|()
argument_list|)
expr_stmt|;
name|view
operator|.
name|add
argument_list|(
name|getPreviousPreviewStyleAction
argument_list|()
argument_list|)
expr_stmt|;
name|mb
operator|.
name|add
argument_list|(
name|view
argument_list|)
expr_stmt|;
name|bibtex
operator|.
name|add
argument_list|(
name|newEntryAction
argument_list|)
expr_stmt|;
for|for
control|(
name|NewEntryAction
name|a
range|:
name|newSpecificEntryAction
control|)
block|{
name|newSpec
operator|.
name|add
argument_list|(
name|a
argument_list|)
expr_stmt|;
block|}
name|bibtex
operator|.
name|add
argument_list|(
name|newSpec
argument_list|)
expr_stmt|;
name|bibtex
operator|.
name|add
argument_list|(
name|plainTextImport
argument_list|)
expr_stmt|;
name|bibtex
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|bibtex
operator|.
name|add
argument_list|(
name|editEntry
argument_list|)
expr_stmt|;
name|bibtex
operator|.
name|add
argument_list|(
name|editPreamble
argument_list|)
expr_stmt|;
name|bibtex
operator|.
name|add
argument_list|(
name|editStrings
argument_list|)
expr_stmt|;
name|bibtex
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|bibtex
operator|.
name|add
argument_list|(
name|customizeAction
argument_list|)
expr_stmt|;
name|bibtex
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|bibtex
operator|.
name|add
argument_list|(
name|deleteEntry
argument_list|)
expr_stmt|;
name|mb
operator|.
name|add
argument_list|(
name|bibtex
argument_list|)
expr_stmt|;
name|quality
operator|.
name|add
argument_list|(
name|dupliCheck
argument_list|)
expr_stmt|;
name|quality
operator|.
name|add
argument_list|(
name|mergeEntries
argument_list|)
expr_stmt|;
name|quality
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|quality
operator|.
name|add
argument_list|(
name|resolveDuplicateKeys
argument_list|)
expr_stmt|;
name|quality
operator|.
name|add
argument_list|(
name|checkIntegrity
argument_list|)
expr_stmt|;
name|quality
operator|.
name|add
argument_list|(
name|cleanupEntries
argument_list|)
expr_stmt|;
name|quality
operator|.
name|add
argument_list|(
name|massSetField
argument_list|)
expr_stmt|;
name|quality
operator|.
name|add
argument_list|(
name|makeKeyAction
argument_list|)
expr_stmt|;
name|quality
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|quality
operator|.
name|add
argument_list|(
name|autoSetFile
argument_list|)
expr_stmt|;
name|quality
operator|.
name|add
argument_list|(
name|findUnlinkedFiles
argument_list|)
expr_stmt|;
name|quality
operator|.
name|add
argument_list|(
name|autoLinkFile
argument_list|)
expr_stmt|;
for|for
control|(
name|IdFetcher
name|fetcher
range|:
name|WebFetchers
operator|.
name|getIdFetchers
argument_list|(
name|Globals
operator|.
name|prefs
operator|.
name|getImportFormatPreferences
argument_list|()
argument_list|)
control|)
block|{
name|lookupIdentifiers
operator|.
name|add
argument_list|(
operator|new
name|LookupIdentifierAction
argument_list|(
name|this
argument_list|,
name|fetcher
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|quality
operator|.
name|add
argument_list|(
name|lookupIdentifiers
argument_list|)
expr_stmt|;
name|quality
operator|.
name|add
argument_list|(
name|downloadFullText
argument_list|)
expr_stmt|;
name|mb
operator|.
name|add
argument_list|(
name|quality
argument_list|)
expr_stmt|;
name|tools
operator|.
name|add
argument_list|(
name|newSubDatabaseAction
argument_list|)
expr_stmt|;
name|tools
operator|.
name|add
argument_list|(
name|writeXmpAction
argument_list|)
expr_stmt|;
name|tools
operator|.
name|add
argument_list|(
operator|new
name|JCheckBoxMenuItem
argument_list|(
name|openOfficePanel
operator|.
name|getToggleAction
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|tools
operator|.
name|add
argument_list|(
name|pushExternalButton
operator|.
name|getMenuAction
argument_list|()
argument_list|)
expr_stmt|;
name|tools
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|tools
operator|.
name|add
argument_list|(
name|openFolder
argument_list|)
expr_stmt|;
name|tools
operator|.
name|add
argument_list|(
name|openFile
argument_list|)
expr_stmt|;
name|tools
operator|.
name|add
argument_list|(
name|openUrl
argument_list|)
expr_stmt|;
name|tools
operator|.
name|add
argument_list|(
name|openConsole
argument_list|)
expr_stmt|;
name|tools
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|tools
operator|.
name|add
argument_list|(
name|abbreviateIso
argument_list|)
expr_stmt|;
name|tools
operator|.
name|add
argument_list|(
name|abbreviateMedline
argument_list|)
expr_stmt|;
name|tools
operator|.
name|add
argument_list|(
name|unabbreviate
argument_list|)
expr_stmt|;
name|mb
operator|.
name|add
argument_list|(
name|tools
argument_list|)
expr_stmt|;
name|options
operator|.
name|add
argument_list|(
name|showPrefs
argument_list|)
expr_stmt|;
name|AbstractAction
name|genFieldsCustomization
init|=
operator|new
name|GenFieldsCustomizationAction
argument_list|()
decl_stmt|;
name|AbstractAction
name|protectTerms
init|=
operator|new
name|ProtectedTermsAction
argument_list|()
decl_stmt|;
name|options
operator|.
name|add
argument_list|(
name|genFieldsCustomization
argument_list|)
expr_stmt|;
name|options
operator|.
name|add
argument_list|(
name|customImpAction
argument_list|)
expr_stmt|;
name|options
operator|.
name|add
argument_list|(
name|customExpAction
argument_list|)
expr_stmt|;
name|options
operator|.
name|add
argument_list|(
name|customFileTypesAction
argument_list|)
expr_stmt|;
name|options
operator|.
name|add
argument_list|(
name|manageJournals
argument_list|)
expr_stmt|;
name|options
operator|.
name|add
argument_list|(
name|keyBindingAction
argument_list|)
expr_stmt|;
name|options
operator|.
name|add
argument_list|(
name|protectTerms
argument_list|)
expr_stmt|;
name|options
operator|.
name|add
argument_list|(
name|manageSelectors
argument_list|)
expr_stmt|;
name|mb
operator|.
name|add
argument_list|(
name|options
argument_list|)
expr_stmt|;
name|helpMenu
operator|.
name|add
argument_list|(
name|help
argument_list|)
expr_stmt|;
name|helpMenu
operator|.
name|add
argument_list|(
name|openForumAction
argument_list|)
expr_stmt|;
name|helpMenu
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|helpMenu
operator|.
name|add
argument_list|(
name|errorConsole
argument_list|)
expr_stmt|;
name|helpMenu
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|helpMenu
operator|.
name|add
argument_list|(
operator|new
name|SearchForUpdateAction
argument_list|()
argument_list|)
expr_stmt|;
name|JMenu
name|webMenu
init|=
name|JabRefFrame
operator|.
name|subMenu
argument_list|(
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"JabRef resources"
argument_list|)
argument_list|)
decl_stmt|;
name|webMenu
operator|.
name|add
argument_list|(
name|jabrefWebPageAction
argument_list|)
expr_stmt|;
name|webMenu
operator|.
name|add
argument_list|(
name|jabrefBlogAction
argument_list|)
expr_stmt|;
name|webMenu
operator|.
name|add
argument_list|(
name|jabrefFacebookAction
argument_list|)
expr_stmt|;
name|webMenu
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|webMenu
operator|.
name|add
argument_list|(
name|forkMeOnGitHubAction
argument_list|)
expr_stmt|;
name|webMenu
operator|.
name|add
argument_list|(
name|developmentVersionAction
argument_list|)
expr_stmt|;
name|webMenu
operator|.
name|add
argument_list|(
name|changeLogAction
argument_list|)
expr_stmt|;
name|webMenu
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|webMenu
operator|.
name|add
argument_list|(
name|donationAction
argument_list|)
expr_stmt|;
name|helpMenu
operator|.
name|add
argument_list|(
name|webMenu
argument_list|)
expr_stmt|;
name|helpMenu
operator|.
name|add
argument_list|(
name|about
argument_list|)
expr_stmt|;
name|mb
operator|.
name|add
argument_list|(
name|helpMenu
argument_list|)
expr_stmt|;
name|createDisabledIconsForMenuEntries
argument_list|(
name|mb
argument_list|)
expr_stmt|;
block|}
DECL|method|addParserResult (ParserResult pr, boolean focusPanel)
specifier|public
name|void
name|addParserResult
parameter_list|(
name|ParserResult
name|pr
parameter_list|,
name|boolean
name|focusPanel
parameter_list|)
block|{
if|if
condition|(
name|pr
operator|.
name|toOpenTab
argument_list|()
condition|)
block|{
comment|// Add the entries to the open tab.
name|BasePanel
name|panel
init|=
name|getCurrentBasePanel
argument_list|()
decl_stmt|;
if|if
condition|(
name|panel
operator|==
literal|null
condition|)
block|{
comment|// There is no open tab to add to, so we create a new tab:
name|addTab
argument_list|(
name|pr
operator|.
name|getDatabaseContext
argument_list|()
argument_list|,
name|focusPanel
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|List
argument_list|<
name|BibEntry
argument_list|>
name|entries
init|=
operator|new
name|ArrayList
argument_list|<>
argument_list|(
name|pr
operator|.
name|getDatabase
argument_list|()
operator|.
name|getEntries
argument_list|()
argument_list|)
decl_stmt|;
name|addImportedEntries
argument_list|(
name|panel
argument_list|,
name|entries
argument_list|,
literal|false
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
comment|// only add tab if DB is not already open
name|Optional
argument_list|<
name|BasePanel
argument_list|>
name|panel
init|=
name|getBasePanelList
argument_list|()
operator|.
name|stream
argument_list|()
operator|.
name|filter
argument_list|(
name|p
lambda|->
name|p
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getDatabaseFile
argument_list|()
operator|.
name|equals
argument_list|(
name|pr
operator|.
name|getFile
argument_list|()
argument_list|)
argument_list|)
operator|.
name|findFirst
argument_list|()
decl_stmt|;
if|if
condition|(
name|panel
operator|.
name|isPresent
argument_list|()
condition|)
block|{
name|tabbedPane
operator|.
name|setSelectedComponent
argument_list|(
name|panel
operator|.
name|get
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|addTab
argument_list|(
name|pr
operator|.
name|getDatabaseContext
argument_list|()
argument_list|,
name|focusPanel
argument_list|)
expr_stmt|;
block|}
block|}
block|}
DECL|method|createToolBar ()
specifier|private
name|void
name|createToolBar
parameter_list|()
block|{
name|tlb
operator|.
name|putClientProperty
argument_list|(
name|Options
operator|.
name|HEADER_STYLE_KEY
argument_list|,
name|HeaderStyle
operator|.
name|BOTH
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|setBorder
argument_list|(
literal|null
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|setRollover
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|setFloatable
argument_list|(
literal|false
argument_list|)
expr_stmt|;
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|BIBLATEX_DEFAULT_MODE
argument_list|)
condition|)
block|{
name|tlb
operator|.
name|addAction
argument_list|(
name|newBiblatexDatabaseAction
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|tlb
operator|.
name|addAction
argument_list|(
name|newBibtexDatabaseAction
argument_list|)
expr_stmt|;
block|}
name|tlb
operator|.
name|addAction
argument_list|(
name|getOpenDatabaseAction
argument_list|()
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|save
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|saveAll
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|cut
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|copy
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|paste
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|undo
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|redo
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|getBackAction
argument_list|()
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|getForwardAction
argument_list|()
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|newEntryAction
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|editEntry
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|editStrings
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|deleteEntry
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|makeKeyAction
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|cleanupEntries
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|mergeEntries
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|pullChangesFromSharedDatabase
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|openConsole
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|mark
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addAction
argument_list|(
name|unmark
argument_list|)
expr_stmt|;
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SPECIALFIELDSENABLED
argument_list|)
condition|)
block|{
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_RANKING
argument_list|)
condition|)
block|{
name|JButton
name|button
init|=
name|SpecialFieldDropDown
operator|.
name|generateSpecialFieldButtonWithDropDown
argument_list|(
name|SpecialField
operator|.
name|RANKING
argument_list|,
name|this
argument_list|)
decl_stmt|;
name|tlb
operator|.
name|add
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|specialFieldButtons
operator|.
name|add
argument_list|(
name|button
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_RELEVANCE
argument_list|)
condition|)
block|{
name|tlb
operator|.
name|addAction
argument_list|(
name|toggleRelevance
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_QUALITY
argument_list|)
condition|)
block|{
name|tlb
operator|.
name|addAction
argument_list|(
name|toggleQualityAssured
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_PRIORITY
argument_list|)
condition|)
block|{
name|JButton
name|button
init|=
name|SpecialFieldDropDown
operator|.
name|generateSpecialFieldButtonWithDropDown
argument_list|(
name|SpecialField
operator|.
name|PRIORITY
argument_list|,
name|this
argument_list|)
decl_stmt|;
name|tlb
operator|.
name|add
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|specialFieldButtons
operator|.
name|add
argument_list|(
name|button
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_PRINTED
argument_list|)
condition|)
block|{
name|tlb
operator|.
name|addAction
argument_list|(
name|togglePrinted
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|SHOWCOLUMN_READ
argument_list|)
condition|)
block|{
name|JButton
name|button
init|=
name|SpecialFieldDropDown
operator|.
name|generateSpecialFieldButtonWithDropDown
argument_list|(
name|SpecialField
operator|.
name|READ_STATUS
argument_list|,
name|this
argument_list|)
decl_stmt|;
name|tlb
operator|.
name|add
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|specialFieldButtons
operator|.
name|add
argument_list|(
name|button
argument_list|)
expr_stmt|;
block|}
block|}
name|tlb
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|tlb
operator|.
name|addJToggleButton
argument_list|(
operator|new
name|JToggleButton
argument_list|(
name|generalFetcher
operator|.
name|getToggleAction
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|previewToggle
operator|=
operator|new
name|JToggleButton
argument_list|(
name|togglePreview
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addJToggleButton
argument_list|(
name|previewToggle
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addJToggleButton
argument_list|(
operator|new
name|JToggleButton
argument_list|(
name|groupSidePane
operator|.
name|getToggleAction
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|tlb
operator|.
name|add
argument_list|(
name|pushExternalButton
operator|.
name|getComponent
argument_list|()
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|tlb
operator|.
name|add
argument_list|(
name|donationAction
argument_list|)
expr_stmt|;
name|tlb
operator|.
name|add
argument_list|(
name|forkMeOnGitHubAction
argument_list|)
expr_stmt|;
name|createDisabledIconsForButtons
argument_list|(
name|tlb
argument_list|)
expr_stmt|;
block|}
comment|/**      * displays the String on the Status Line visible on the bottom of the JabRef mainframe      */
DECL|method|output (final String s)
specifier|public
name|void
name|output
parameter_list|(
specifier|final
name|String
name|s
parameter_list|)
block|{
name|SwingUtilities
operator|.
name|invokeLater
argument_list|(
parameter_list|()
lambda|->
block|{
name|statusLine
operator|.
name|setText
argument_list|(
name|s
argument_list|)
expr_stmt|;
name|statusLine
operator|.
name|repaint
argument_list|()
expr_stmt|;
block|}
argument_list|)
expr_stmt|;
block|}
DECL|method|initActions ()
specifier|private
name|void
name|initActions
parameter_list|()
block|{
name|openDatabaseOnlyActions
operator|.
name|clear
argument_list|()
expr_stmt|;
name|openDatabaseOnlyActions
operator|.
name|addAll
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|manageSelectors
argument_list|,
name|mergeDatabaseAction
argument_list|,
name|newSubDatabaseAction
argument_list|,
name|save
argument_list|,
name|copyPreview
argument_list|,
name|saveAs
argument_list|,
name|saveSelectedAs
argument_list|,
name|saveSelectedAsPlain
argument_list|,
name|editModeAction
argument_list|,
name|undo
argument_list|,
name|redo
argument_list|,
name|cut
argument_list|,
name|deleteEntry
argument_list|,
name|copy
argument_list|,
name|paste
argument_list|,
name|mark
argument_list|,
name|markSpecific
argument_list|,
name|unmark
argument_list|,
name|unmarkAll
argument_list|,
name|rankSubMenu
argument_list|,
name|editEntry
argument_list|,
name|selectAll
argument_list|,
name|copyKey
argument_list|,
name|copyCiteKey
argument_list|,
name|copyKeyAndTitle
argument_list|,
name|copyKeyAndLink
argument_list|,
name|editPreamble
argument_list|,
name|editStrings
argument_list|,
name|groupSidePane
operator|.
name|getToggleAction
argument_list|()
argument_list|,
name|makeKeyAction
argument_list|,
name|normalSearch
argument_list|,
name|generalFetcher
operator|.
name|getToggleAction
argument_list|()
argument_list|,
name|mergeEntries
argument_list|,
name|cleanupEntries
argument_list|,
name|exportToClipboard
argument_list|,
name|replaceAll
argument_list|,
name|sendAsEmail
argument_list|,
name|downloadFullText
argument_list|,
name|lookupIdentifiers
argument_list|,
name|writeXmpAction
argument_list|,
name|openOfficePanel
operator|.
name|getToggleAction
argument_list|()
argument_list|,
name|findUnlinkedFiles
argument_list|,
name|addToGroup
argument_list|,
name|removeFromGroup
argument_list|,
name|moveToGroup
argument_list|,
name|autoLinkFile
argument_list|,
name|resolveDuplicateKeys
argument_list|,
name|openUrl
argument_list|,
name|openFolder
argument_list|,
name|openFile
argument_list|,
name|togglePreview
argument_list|,
name|dupliCheck
argument_list|,
name|autoSetFile
argument_list|,
name|newEntryAction
argument_list|,
name|newSpec
argument_list|,
name|customizeAction
argument_list|,
name|plainTextImport
argument_list|,
name|getMassSetField
argument_list|()
argument_list|,
name|getManageKeywords
argument_list|()
argument_list|,
name|pushExternalButton
operator|.
name|getMenuAction
argument_list|()
argument_list|,
name|closeDatabaseAction
argument_list|,
name|getNextPreviewStyleAction
argument_list|()
argument_list|,
name|getPreviousPreviewStyleAction
argument_list|()
argument_list|,
name|checkIntegrity
argument_list|,
name|databaseProperties
argument_list|,
name|abbreviateIso
argument_list|,
name|abbreviateMedline
argument_list|,
name|unabbreviate
argument_list|,
name|exportAll
argument_list|,
name|exportSelected
argument_list|,
name|importCurrent
argument_list|,
name|saveAll
argument_list|,
name|focusTable
argument_list|,
name|increaseFontSize
argument_list|,
name|decreseFontSize
argument_list|,
name|defaultFontSize
argument_list|,
name|toggleRelevance
argument_list|,
name|toggleQualityAssured
argument_list|,
name|togglePrinted
argument_list|,
name|pushExternalButton
operator|.
name|getComponent
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|openDatabaseOnlyActions
operator|.
name|addAll
argument_list|(
name|newSpecificEntryAction
argument_list|)
expr_stmt|;
name|openDatabaseOnlyActions
operator|.
name|addAll
argument_list|(
name|specialFieldButtons
argument_list|)
expr_stmt|;
name|severalDatabasesOnlyActions
operator|.
name|clear
argument_list|()
expr_stmt|;
name|severalDatabasesOnlyActions
operator|.
name|addAll
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|nextTab
argument_list|,
name|prevTab
argument_list|,
name|sortTabs
argument_list|)
argument_list|)
expr_stmt|;
name|openAndSavedDatabasesOnlyActions
operator|.
name|addAll
argument_list|(
name|Collections
operator|.
name|singletonList
argument_list|(
name|openConsole
argument_list|)
argument_list|)
expr_stmt|;
name|sharedDatabaseOnlyActions
operator|.
name|addAll
argument_list|(
name|Collections
operator|.
name|singletonList
argument_list|(
name|pullChangesFromSharedDatabase
argument_list|)
argument_list|)
expr_stmt|;
name|noSharedDatabaseActions
operator|.
name|addAll
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|save
argument_list|,
name|saveAll
argument_list|)
argument_list|)
expr_stmt|;
name|oneEntryOnlyActions
operator|.
name|clear
argument_list|()
expr_stmt|;
name|oneEntryOnlyActions
operator|.
name|addAll
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|editEntry
argument_list|)
argument_list|)
expr_stmt|;
name|oneEntryWithFileOnlyActions
operator|.
name|clear
argument_list|()
expr_stmt|;
name|oneEntryWithFileOnlyActions
operator|.
name|addAll
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|openFolder
argument_list|,
name|openFile
argument_list|)
argument_list|)
expr_stmt|;
name|oneEntryWithURLorDOIOnlyActions
operator|.
name|clear
argument_list|()
expr_stmt|;
name|oneEntryWithURLorDOIOnlyActions
operator|.
name|addAll
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|openUrl
argument_list|)
argument_list|)
expr_stmt|;
name|twoEntriesOnlyActions
operator|.
name|clear
argument_list|()
expr_stmt|;
name|twoEntriesOnlyActions
operator|.
name|addAll
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|mergeEntries
argument_list|)
argument_list|)
expr_stmt|;
name|atLeastOneEntryActions
operator|.
name|clear
argument_list|()
expr_stmt|;
name|atLeastOneEntryActions
operator|.
name|addAll
argument_list|(
name|Arrays
operator|.
name|asList
argument_list|(
name|downloadFullText
argument_list|,
name|lookupIdentifiers
argument_list|,
name|exportLinkedFiles
argument_list|)
argument_list|)
expr_stmt|;
name|tabbedPane
operator|.
name|addChangeListener
argument_list|(
name|event
lambda|->
name|updateEnabledState
argument_list|()
argument_list|)
expr_stmt|;
block|}
comment|/**      * Enable or Disable all actions based on the number of open tabs.      *<p>      * The action that are affected are set in initActions.      */
DECL|method|updateEnabledState ()
specifier|public
name|void
name|updateEnabledState
parameter_list|()
block|{
name|int
name|tabCount
init|=
name|tabbedPane
operator|.
name|getTabCount
argument_list|()
decl_stmt|;
if|if
condition|(
name|tabCount
operator|!=
name|previousTabCount
condition|)
block|{
name|previousTabCount
operator|=
name|tabCount
expr_stmt|;
name|setEnabled
argument_list|(
name|openDatabaseOnlyActions
argument_list|,
name|tabCount
operator|>
literal|0
argument_list|)
expr_stmt|;
name|setEnabled
argument_list|(
name|severalDatabasesOnlyActions
argument_list|,
name|tabCount
operator|>
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|tabCount
operator|==
literal|0
condition|)
block|{
name|getBackAction
argument_list|()
operator|.
name|setEnabled
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|getForwardAction
argument_list|()
operator|.
name|setEnabled
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|setEnabled
argument_list|(
name|openAndSavedDatabasesOnlyActions
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|setEnabled
argument_list|(
name|sharedDatabaseOnlyActions
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|setEnabled
argument_list|(
name|oneEntryOnlyActions
argument_list|,
literal|false
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|tabCount
operator|>
literal|0
condition|)
block|{
name|BasePanel
name|current
init|=
name|getCurrentBasePanel
argument_list|()
decl_stmt|;
name|boolean
name|saved
init|=
name|current
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getDatabasePath
argument_list|()
operator|.
name|isPresent
argument_list|()
decl_stmt|;
name|setEnabled
argument_list|(
name|openAndSavedDatabasesOnlyActions
argument_list|,
name|saved
argument_list|)
expr_stmt|;
name|boolean
name|isShared
init|=
name|current
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getLocation
argument_list|()
operator|==
name|DatabaseLocation
operator|.
name|SHARED
decl_stmt|;
name|setEnabled
argument_list|(
name|sharedDatabaseOnlyActions
argument_list|,
name|isShared
argument_list|)
expr_stmt|;
name|setEnabled
argument_list|(
name|noSharedDatabaseActions
argument_list|,
operator|!
name|isShared
argument_list|)
expr_stmt|;
name|boolean
name|oneEntrySelected
init|=
name|current
operator|.
name|getSelectedEntries
argument_list|()
operator|.
name|size
argument_list|()
operator|==
literal|1
decl_stmt|;
name|setEnabled
argument_list|(
name|oneEntryOnlyActions
argument_list|,
name|oneEntrySelected
argument_list|)
expr_stmt|;
name|setEnabled
argument_list|(
name|oneEntryWithFileOnlyActions
argument_list|,
name|isExistFile
argument_list|(
name|current
operator|.
name|getSelectedEntries
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|setEnabled
argument_list|(
name|oneEntryWithURLorDOIOnlyActions
argument_list|,
name|isExistURLorDOI
argument_list|(
name|current
operator|.
name|getSelectedEntries
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|boolean
name|twoEntriesSelected
init|=
name|current
operator|.
name|getSelectedEntries
argument_list|()
operator|.
name|size
argument_list|()
operator|==
literal|2
decl_stmt|;
name|setEnabled
argument_list|(
name|twoEntriesOnlyActions
argument_list|,
name|twoEntriesSelected
argument_list|)
expr_stmt|;
name|boolean
name|atLeastOneEntrySelected
init|=
operator|!
name|current
operator|.
name|getSelectedEntries
argument_list|()
operator|.
name|isEmpty
argument_list|()
decl_stmt|;
name|setEnabled
argument_list|(
name|atLeastOneEntryActions
argument_list|,
name|atLeastOneEntrySelected
argument_list|)
expr_stmt|;
block|}
block|}
comment|/**      * This method causes all open BasePanels to set up their tables      * anew. When called from PrefsDialog3, this updates to the new      * settings.      */
DECL|method|setupAllTables ()
specifier|public
name|void
name|setupAllTables
parameter_list|()
block|{
comment|// This action can be invoked without an open database, so
comment|// we have to check if we have one before trying to invoke
comment|// methods to execute changes in the preferences.
comment|// We want to notify all tabs about the changes to
comment|// avoid problems when changing the column set.
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|tabbedPane
operator|.
name|getTabCount
argument_list|()
condition|;
name|i
operator|++
control|)
block|{
name|BasePanel
name|bf
init|=
name|getBasePanelAt
argument_list|(
name|i
argument_list|)
decl_stmt|;
comment|// Update tables:
if|if
condition|(
name|bf
operator|.
name|getDatabase
argument_list|()
operator|!=
literal|null
condition|)
block|{
name|bf
operator|.
name|setupMainPanel
argument_list|()
expr_stmt|;
block|}
block|}
block|}
DECL|method|collectDatabaseFilePaths ()
specifier|private
name|List
argument_list|<
name|String
argument_list|>
name|collectDatabaseFilePaths
parameter_list|()
block|{
name|List
argument_list|<
name|String
argument_list|>
name|dbPaths
init|=
operator|new
name|ArrayList
argument_list|<>
argument_list|(
name|getBasePanelCount
argument_list|()
argument_list|)
decl_stmt|;
for|for
control|(
name|BasePanel
name|basePanel
range|:
name|getBasePanelList
argument_list|()
control|)
block|{
try|try
block|{
comment|// db file exists
if|if
condition|(
name|basePanel
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getDatabaseFile
argument_list|()
operator|.
name|isPresent
argument_list|()
condition|)
block|{
name|dbPaths
operator|.
name|add
argument_list|(
name|basePanel
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getDatabaseFile
argument_list|()
operator|.
name|get
argument_list|()
operator|.
name|getCanonicalPath
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|dbPaths
operator|.
name|add
argument_list|(
literal|""
argument_list|)
expr_stmt|;
block|}
block|}
catch|catch
parameter_list|(
name|IOException
name|ex
parameter_list|)
block|{
name|LOGGER
operator|.
name|error
argument_list|(
literal|"Invalid database file path: "
operator|+
name|ex
operator|.
name|getMessage
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
return|return
name|dbPaths
return|;
block|}
DECL|method|getUniquePathParts ()
specifier|private
name|List
argument_list|<
name|String
argument_list|>
name|getUniquePathParts
parameter_list|()
block|{
name|List
argument_list|<
name|String
argument_list|>
name|dbPaths
init|=
name|collectDatabaseFilePaths
argument_list|()
decl_stmt|;
return|return
name|FileUtil
operator|.
name|uniquePathSubstrings
argument_list|(
name|dbPaths
argument_list|)
return|;
block|}
DECL|method|updateAllTabTitles ()
specifier|public
name|void
name|updateAllTabTitles
parameter_list|()
block|{
name|List
argument_list|<
name|String
argument_list|>
name|paths
init|=
name|getUniquePathParts
argument_list|()
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|getBasePanelCount
argument_list|()
condition|;
name|i
operator|++
control|)
block|{
name|String
name|uniqPath
init|=
name|paths
operator|.
name|get
argument_list|(
name|i
argument_list|)
decl_stmt|;
name|Optional
argument_list|<
name|File
argument_list|>
name|file
init|=
name|getBasePanelAt
argument_list|(
name|i
argument_list|)
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getDatabaseFile
argument_list|()
decl_stmt|;
if|if
condition|(
name|file
operator|.
name|isPresent
argument_list|()
condition|)
block|{
if|if
condition|(
operator|!
name|uniqPath
operator|.
name|equals
argument_list|(
name|file
operator|.
name|get
argument_list|()
operator|.
name|getName
argument_list|()
argument_list|)
operator|&&
name|uniqPath
operator|.
name|contains
argument_list|(
name|File
operator|.
name|separator
argument_list|)
condition|)
block|{
comment|// remove filename
name|uniqPath
operator|=
name|uniqPath
operator|.
name|substring
argument_list|(
literal|0
argument_list|,
name|uniqPath
operator|.
name|lastIndexOf
argument_list|(
name|File
operator|.
name|separator
argument_list|)
argument_list|)
expr_stmt|;
name|tabbedPane
operator|.
name|setTitleAt
argument_list|(
name|i
argument_list|,
name|getBasePanelAt
argument_list|(
name|i
argument_list|)
operator|.
name|getTabTitle
argument_list|()
operator|+
literal|" \u2014 "
operator|+
name|uniqPath
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|// set original filename (again)
name|tabbedPane
operator|.
name|setTitleAt
argument_list|(
name|i
argument_list|,
name|getBasePanelAt
argument_list|(
name|i
argument_list|)
operator|.
name|getTabTitle
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|tabbedPane
operator|.
name|setTitleAt
argument_list|(
name|i
argument_list|,
name|getBasePanelAt
argument_list|(
name|i
argument_list|)
operator|.
name|getTabTitle
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|tabbedPane
operator|.
name|setToolTipTextAt
argument_list|(
name|i
argument_list|,
name|file
operator|.
name|map
argument_list|(
name|File
operator|::
name|getAbsolutePath
argument_list|)
operator|.
name|orElse
argument_list|(
literal|null
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
DECL|method|addTab (BasePanel basePanel, boolean raisePanel)
specifier|public
name|void
name|addTab
parameter_list|(
name|BasePanel
name|basePanel
parameter_list|,
name|boolean
name|raisePanel
parameter_list|)
block|{
comment|// add tab
name|tabbedPane
operator|.
name|add
argument_list|(
name|basePanel
operator|.
name|getTabTitle
argument_list|()
argument_list|,
name|basePanel
argument_list|)
expr_stmt|;
comment|// update all tab titles
name|updateAllTabTitles
argument_list|()
expr_stmt|;
if|if
condition|(
name|raisePanel
condition|)
block|{
name|tabbedPane
operator|.
name|setSelectedComponent
argument_list|(
name|basePanel
argument_list|)
expr_stmt|;
block|}
comment|// Register undo/redo listener
name|basePanel
operator|.
name|getUndoManager
argument_list|()
operator|.
name|registerListener
argument_list|(
operator|new
name|UndoRedoEventManager
argument_list|()
argument_list|)
expr_stmt|;
name|BibDatabaseContext
name|context
init|=
name|basePanel
operator|.
name|getBibDatabaseContext
argument_list|()
decl_stmt|;
if|if
condition|(
name|readyForAutosave
argument_list|(
name|context
argument_list|)
condition|)
block|{
name|AutosaveManager
name|autosaver
init|=
name|AutosaveManager
operator|.
name|start
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|autosaver
operator|.
name|registerListener
argument_list|(
operator|new
name|AutosaveUIManager
argument_list|(
name|basePanel
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|BackupManager
operator|.
name|start
argument_list|(
name|context
argument_list|)
expr_stmt|;
comment|// Track opening
name|trackOpenNewDatabase
argument_list|(
name|basePanel
argument_list|)
expr_stmt|;
block|}
DECL|method|trackOpenNewDatabase (BasePanel basePanel)
specifier|private
name|void
name|trackOpenNewDatabase
parameter_list|(
name|BasePanel
name|basePanel
parameter_list|)
block|{
name|Map
argument_list|<
name|String
argument_list|,
name|String
argument_list|>
name|properties
init|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
decl_stmt|;
name|Map
argument_list|<
name|String
argument_list|,
name|Double
argument_list|>
name|measurements
init|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
decl_stmt|;
name|measurements
operator|.
name|put
argument_list|(
literal|"NumberOfEntries"
argument_list|,
operator|(
name|double
operator|)
name|basePanel
operator|.
name|getDatabaseContext
argument_list|()
operator|.
name|getDatabase
argument_list|()
operator|.
name|getEntryCount
argument_list|()
argument_list|)
expr_stmt|;
name|Globals
operator|.
name|getTelemetryClient
argument_list|()
operator|.
name|ifPresent
argument_list|(
name|client
lambda|->
name|client
operator|.
name|trackEvent
argument_list|(
literal|"OpenNewDatabase"
argument_list|,
name|properties
argument_list|,
name|measurements
argument_list|)
argument_list|)
expr_stmt|;
block|}
DECL|method|addTab (BibDatabaseContext databaseContext, boolean raisePanel)
specifier|public
name|BasePanel
name|addTab
parameter_list|(
name|BibDatabaseContext
name|databaseContext
parameter_list|,
name|boolean
name|raisePanel
parameter_list|)
block|{
name|Objects
operator|.
name|requireNonNull
argument_list|(
name|databaseContext
argument_list|)
expr_stmt|;
name|BasePanel
name|bp
init|=
operator|new
name|BasePanel
argument_list|(
name|JabRefFrame
operator|.
name|this
argument_list|,
name|databaseContext
argument_list|)
decl_stmt|;
name|addTab
argument_list|(
name|bp
argument_list|,
name|raisePanel
argument_list|)
expr_stmt|;
return|return
name|bp
return|;
block|}
DECL|method|readyForAutosave (BibDatabaseContext context)
specifier|private
name|boolean
name|readyForAutosave
parameter_list|(
name|BibDatabaseContext
name|context
parameter_list|)
block|{
return|return
operator|(
operator|(
name|context
operator|.
name|getLocation
argument_list|()
operator|==
name|DatabaseLocation
operator|.
name|SHARED
operator|)
operator|||
operator|(
operator|(
name|context
operator|.
name|getLocation
argument_list|()
operator|==
name|DatabaseLocation
operator|.
name|LOCAL
operator|)
operator|&&
name|Globals
operator|.
name|prefs
operator|.
name|getBoolean
argument_list|(
name|JabRefPreferences
operator|.
name|LOCAL_AUTO_SAVE
argument_list|)
operator|)
operator|)
operator|&&
name|context
operator|.
name|getDatabaseFile
argument_list|()
operator|.
name|isPresent
argument_list|()
return|;
block|}
comment|/**      * Creates icons for the disabled state for all JMenuItems with FontBasedIcons in the given menuElement.      * This is necessary as Swing is not able to generate default disabled icons for font based icons.      *      * @param menuElement the menuElement for which disabled icons should be generated      */
DECL|method|createDisabledIconsForMenuEntries (MenuElement menuElement)
specifier|public
name|void
name|createDisabledIconsForMenuEntries
parameter_list|(
name|MenuElement
name|menuElement
parameter_list|)
block|{
for|for
control|(
name|MenuElement
name|subElement
range|:
name|menuElement
operator|.
name|getSubElements
argument_list|()
control|)
block|{
if|if
condition|(
operator|(
name|subElement
operator|instanceof
name|JMenu
operator|)
operator|||
operator|(
name|subElement
operator|instanceof
name|JPopupMenu
operator|)
condition|)
block|{
name|createDisabledIconsForMenuEntries
argument_list|(
name|subElement
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|subElement
operator|instanceof
name|JMenuItem
condition|)
block|{
name|JMenuItem
name|item
init|=
operator|(
name|JMenuItem
operator|)
name|subElement
decl_stmt|;
if|if
condition|(
name|item
operator|.
name|getIcon
argument_list|()
operator|instanceof
name|IconTheme
operator|.
name|FontBasedIcon
condition|)
block|{
name|item
operator|.
name|setDisabledIcon
argument_list|(
operator|(
operator|(
name|IconTheme
operator|.
name|FontBasedIcon
operator|)
name|item
operator|.
name|getIcon
argument_list|()
operator|)
operator|.
name|createDisabledIcon
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
DECL|method|createDisabledIconsForButtons (Container container)
specifier|public
name|void
name|createDisabledIconsForButtons
parameter_list|(
name|Container
name|container
parameter_list|)
block|{
for|for
control|(
name|int
name|index
init|=
literal|0
init|;
name|index
operator|<
name|container
operator|.
name|getComponentCount
argument_list|()
condition|;
name|index
operator|++
control|)
block|{
name|Component
name|component
init|=
name|container
operator|.
name|getComponent
argument_list|(
name|index
argument_list|)
decl_stmt|;
if|if
condition|(
name|component
operator|instanceof
name|JButton
condition|)
block|{
name|JButton
name|button
init|=
operator|(
name|JButton
operator|)
name|component
decl_stmt|;
if|if
condition|(
name|button
operator|.
name|getIcon
argument_list|()
operator|instanceof
name|IconTheme
operator|.
name|FontBasedIcon
condition|)
block|{
name|button
operator|.
name|setDisabledIcon
argument_list|(
operator|(
operator|(
name|IconTheme
operator|.
name|FontBasedIcon
operator|)
name|button
operator|.
name|getIcon
argument_list|()
operator|)
operator|.
name|createDisabledIcon
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|component
operator|instanceof
name|JPanel
condition|)
block|{
name|createDisabledIconsForButtons
argument_list|(
operator|(
name|JPanel
operator|)
name|component
argument_list|)
expr_stmt|;
block|}
block|}
block|}
comment|/**      * This method does the job of adding imported entries into the active      * database, or into a new one. It shows the ImportInspectionDialog if      * preferences indicate it should be used. Otherwise it imports directly.      *      * @param panel     The BasePanel to add to.      * @param entries   The entries to add.      * @param openInNew Should the entries be imported into a new database?      */
DECL|method|addImportedEntries (final BasePanel panel, final List<BibEntry> entries, final boolean openInNew)
specifier|private
name|void
name|addImportedEntries
parameter_list|(
specifier|final
name|BasePanel
name|panel
parameter_list|,
specifier|final
name|List
argument_list|<
name|BibEntry
argument_list|>
name|entries
parameter_list|,
specifier|final
name|boolean
name|openInNew
parameter_list|)
block|{
name|SwingUtilities
operator|.
name|invokeLater
argument_list|(
parameter_list|()
lambda|->
block|{
name|ImportInspectionDialog
name|diag
init|=
operator|new
name|ImportInspectionDialog
argument_list|(
name|JabRefFrame
operator|.
name|this
argument_list|,
name|panel
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Import"
argument_list|)
argument_list|,
name|openInNew
argument_list|)
decl_stmt|;
name|diag
operator|.
name|addEntries
argument_list|(
name|entries
argument_list|)
expr_stmt|;
name|diag
operator|.
name|entryListComplete
argument_list|()
expr_stmt|;
comment|//diag.setLocationRelativeTo(JabRefFrame.this);
name|diag
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|diag
operator|.
name|toFront
argument_list|()
expr_stmt|;
block|}
argument_list|)
expr_stmt|;
block|}
DECL|method|getFileHistory ()
specifier|public
name|FileHistoryMenu
name|getFileHistory
parameter_list|()
block|{
return|return
name|fileHistory
return|;
block|}
comment|/**      * This method shows a wait cursor and blocks all input to the JFrame's contents.      */
DECL|method|block ()
specifier|public
name|void
name|block
parameter_list|()
block|{
name|changeBlocking
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
comment|/**      * This method reverts the cursor to normal, and stops blocking input to the JFrame's contents.      * There are no adverse effects of calling this method redundantly.      */
DECL|method|unblock ()
specifier|public
name|void
name|unblock
parameter_list|()
block|{
name|changeBlocking
argument_list|(
literal|false
argument_list|)
expr_stmt|;
block|}
comment|/**      * Do the actual blocking/unblocking      *      * @param blocked true if input should be blocked      */
DECL|method|changeBlocking (boolean blocked)
specifier|private
name|void
name|changeBlocking
parameter_list|(
name|boolean
name|blocked
parameter_list|)
block|{
comment|/*         if (SwingUtilities.isEventDispatchThread()) {             getGlassPane().setVisible(blocked);         } else {             try {                 SwingUtilities.invokeAndWait(() -> getGlassPane().setVisible(blocked));             } catch (InvocationTargetException | InterruptedException e) {                 LOGGER.error("Problem " + (blocked ? "" : "un") + "blocking UI", e);             }         }         */
block|}
comment|/**      * Set the visibility of the progress bar in the right end of the      * status line at the bottom of the frame.      *<p>      * If not called on the event dispatch thread, this method uses      * SwingUtilities.invokeLater() to do the actual operation on the EDT.      */
DECL|method|setProgressBarVisible (final boolean visible)
specifier|public
name|void
name|setProgressBarVisible
parameter_list|(
specifier|final
name|boolean
name|visible
parameter_list|)
block|{
if|if
condition|(
name|SwingUtilities
operator|.
name|isEventDispatchThread
argument_list|()
condition|)
block|{
name|progressBar
operator|.
name|setVisible
argument_list|(
name|visible
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|SwingUtilities
operator|.
name|invokeLater
argument_list|(
parameter_list|()
lambda|->
name|progressBar
operator|.
name|setVisible
argument_list|(
name|visible
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
comment|/**      * Sets the current value of the progress bar.      *<p>      * If not called on the event dispatch thread, this method uses      * SwingUtilities.invokeLater() to do the actual operation on the EDT.      */
DECL|method|setProgressBarValue (final int value)
specifier|public
name|void
name|setProgressBarValue
parameter_list|(
specifier|final
name|int
name|value
parameter_list|)
block|{
if|if
condition|(
name|SwingUtilities
operator|.
name|isEventDispatchThread
argument_list|()
condition|)
block|{
name|progressBar
operator|.
name|setValue
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|SwingUtilities
operator|.
name|invokeLater
argument_list|(
parameter_list|()
lambda|->
name|progressBar
operator|.
name|setValue
argument_list|(
name|value
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
comment|/**      * Sets the indeterminate status of the progress bar.      *<p>      * If not called on the event dispatch thread, this method uses      * SwingUtilities.invokeLater() to do the actual operation on the EDT.      */
DECL|method|setProgressBarIndeterminate (final boolean value)
specifier|public
name|void
name|setProgressBarIndeterminate
parameter_list|(
specifier|final
name|boolean
name|value
parameter_list|)
block|{
if|if
condition|(
name|SwingUtilities
operator|.
name|isEventDispatchThread
argument_list|()
condition|)
block|{
name|progressBar
operator|.
name|setIndeterminate
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|SwingUtilities
operator|.
name|invokeLater
argument_list|(
parameter_list|()
lambda|->
name|progressBar
operator|.
name|setIndeterminate
argument_list|(
name|value
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
comment|/**      * Sets the maximum value of the progress bar. Always call this method      * before using the progress bar, to set a maximum value appropriate to      * the task at hand.      *<p>      * If not called on the event dispatch thread, this method uses      * SwingUtilities.invokeLater() to do the actual operation on the EDT.      */
DECL|method|setProgressBarMaximum (final int value)
specifier|public
name|void
name|setProgressBarMaximum
parameter_list|(
specifier|final
name|int
name|value
parameter_list|)
block|{
if|if
condition|(
name|SwingUtilities
operator|.
name|isEventDispatchThread
argument_list|()
condition|)
block|{
name|progressBar
operator|.
name|setMaximum
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|SwingUtilities
operator|.
name|invokeLater
argument_list|(
parameter_list|()
lambda|->
name|progressBar
operator|.
name|setMaximum
argument_list|(
name|value
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
comment|/**      * Return a boolean, if the selected entry have file      * @param selectEntryList A selected entries list of the current base pane      * @return true, if the selected entry contains file.      * false, if multiple entries are selected or the selected entry doesn't contains file      */
DECL|method|isExistFile (List<BibEntry> selectEntryList)
specifier|private
name|boolean
name|isExistFile
parameter_list|(
name|List
argument_list|<
name|BibEntry
argument_list|>
name|selectEntryList
parameter_list|)
block|{
if|if
condition|(
name|selectEntryList
operator|.
name|size
argument_list|()
operator|==
literal|1
condition|)
block|{
name|BibEntry
name|selectedEntry
init|=
name|selectEntryList
operator|.
name|get
argument_list|(
literal|0
argument_list|)
decl_stmt|;
return|return
name|selectedEntry
operator|.
name|getField
argument_list|(
name|FieldName
operator|.
name|FILE
argument_list|)
operator|.
name|isPresent
argument_list|()
return|;
block|}
return|return
literal|false
return|;
block|}
comment|/**      * Return a boolean, if the selected entry have url or doi      * @param selectEntryList A selected entries list of the current base pane      * @return true, if the selected entry contains url or doi.      * false, if multiple entries are selected or the selected entry doesn't contains url or doi      */
DECL|method|isExistURLorDOI (List<BibEntry> selectEntryList)
specifier|private
name|boolean
name|isExistURLorDOI
parameter_list|(
name|List
argument_list|<
name|BibEntry
argument_list|>
name|selectEntryList
parameter_list|)
block|{
if|if
condition|(
name|selectEntryList
operator|.
name|size
argument_list|()
operator|==
literal|1
condition|)
block|{
name|BibEntry
name|selectedEntry
init|=
name|selectEntryList
operator|.
name|get
argument_list|(
literal|0
argument_list|)
decl_stmt|;
return|return
operator|(
name|selectedEntry
operator|.
name|getField
argument_list|(
name|FieldName
operator|.
name|URL
argument_list|)
operator|.
name|isPresent
argument_list|()
operator|||
name|selectedEntry
operator|.
name|getField
argument_list|(
name|FieldName
operator|.
name|DOI
argument_list|)
operator|.
name|isPresent
argument_list|()
operator|)
return|;
block|}
return|return
literal|false
return|;
block|}
annotation|@
name|Override
DECL|method|showMessage (String message, String title, int msgType)
specifier|public
name|void
name|showMessage
parameter_list|(
name|String
name|message
parameter_list|,
name|String
name|title
parameter_list|,
name|int
name|msgType
parameter_list|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
literal|null
argument_list|,
name|message
argument_list|,
name|title
argument_list|,
name|msgType
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|setStatus (String s)
specifier|public
name|void
name|setStatus
parameter_list|(
name|String
name|s
parameter_list|)
block|{
name|output
argument_list|(
name|s
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|showMessage (String message)
specifier|public
name|void
name|showMessage
parameter_list|(
name|String
name|message
parameter_list|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
literal|null
argument_list|,
name|message
argument_list|)
expr_stmt|;
block|}
DECL|method|showSaveDialog (String filename)
specifier|private
name|int
name|showSaveDialog
parameter_list|(
name|String
name|filename
parameter_list|)
block|{
name|Object
index|[]
name|options
init|=
block|{
name|Localization
operator|.
name|lang
argument_list|(
literal|"Save changes"
argument_list|)
block|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Discard changes"
argument_list|)
block|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Return to JabRef"
argument_list|)
block|}
decl_stmt|;
return|return
name|JOptionPane
operator|.
name|showOptionDialog
argument_list|(
literal|null
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Library '%0' has changed."
argument_list|,
name|filename
argument_list|)
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Save before closing"
argument_list|)
argument_list|,
name|JOptionPane
operator|.
name|YES_NO_CANCEL_OPTION
argument_list|,
name|JOptionPane
operator|.
name|WARNING_MESSAGE
argument_list|,
literal|null
argument_list|,
name|options
argument_list|,
name|options
index|[
literal|2
index|]
argument_list|)
return|;
block|}
DECL|method|closeTab (BasePanel panel)
specifier|private
name|void
name|closeTab
parameter_list|(
name|BasePanel
name|panel
parameter_list|)
block|{
comment|// empty tab without database
if|if
condition|(
name|panel
operator|==
literal|null
condition|)
block|{
return|return;
block|}
name|BibDatabaseContext
name|context
init|=
name|panel
operator|.
name|getBibDatabaseContext
argument_list|()
decl_stmt|;
if|if
condition|(
name|panel
operator|.
name|isModified
argument_list|()
operator|&&
operator|(
name|context
operator|.
name|getLocation
argument_list|()
operator|==
name|DatabaseLocation
operator|.
name|LOCAL
operator|)
condition|)
block|{
if|if
condition|(
name|confirmClose
argument_list|(
name|panel
argument_list|)
condition|)
block|{
name|removeTab
argument_list|(
name|panel
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|context
operator|.
name|getLocation
argument_list|()
operator|==
name|DatabaseLocation
operator|.
name|SHARED
condition|)
block|{
name|context
operator|.
name|convertToLocalDatabase
argument_list|()
expr_stmt|;
name|context
operator|.
name|getDBMSSynchronizer
argument_list|()
operator|.
name|closeSharedDatabase
argument_list|()
expr_stmt|;
name|context
operator|.
name|clearDBMSSynchronizer
argument_list|()
expr_stmt|;
name|removeTab
argument_list|(
name|panel
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|removeTab
argument_list|(
name|panel
argument_list|)
expr_stmt|;
block|}
name|AutosaveManager
operator|.
name|shutdown
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|BackupManager
operator|.
name|shutdown
argument_list|(
name|context
argument_list|)
expr_stmt|;
block|}
comment|// Ask if the user really wants to close, if the base has not been saved
DECL|method|confirmClose (BasePanel panel)
specifier|private
name|boolean
name|confirmClose
parameter_list|(
name|BasePanel
name|panel
parameter_list|)
block|{
name|boolean
name|close
init|=
literal|false
decl_stmt|;
name|String
name|filename
decl_stmt|;
name|filename
operator|=
name|panel
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getDatabaseFile
argument_list|()
operator|.
name|map
argument_list|(
name|File
operator|::
name|getAbsolutePath
argument_list|)
operator|.
name|orElse
argument_list|(
name|GUIGlobals
operator|.
name|UNTITLED_TITLE
argument_list|)
expr_stmt|;
name|int
name|answer
init|=
name|showSaveDialog
argument_list|(
name|filename
argument_list|)
decl_stmt|;
if|if
condition|(
name|answer
operator|==
name|JOptionPane
operator|.
name|YES_OPTION
condition|)
block|{
comment|// The user wants to save.
try|try
block|{
name|SaveDatabaseAction
name|saveAction
init|=
operator|new
name|SaveDatabaseAction
argument_list|(
name|panel
argument_list|)
decl_stmt|;
name|saveAction
operator|.
name|runCommand
argument_list|()
expr_stmt|;
if|if
condition|(
name|saveAction
operator|.
name|isSuccess
argument_list|()
condition|)
block|{
name|close
operator|=
literal|true
expr_stmt|;
block|}
block|}
catch|catch
parameter_list|(
name|Throwable
name|ex
parameter_list|)
block|{
comment|// do not close
block|}
block|}
elseif|else
if|if
condition|(
name|answer
operator|==
name|JOptionPane
operator|.
name|NO_OPTION
condition|)
block|{
comment|// discard changes
name|close
operator|=
literal|true
expr_stmt|;
block|}
return|return
name|close
return|;
block|}
DECL|method|removeTab (BasePanel panel)
specifier|private
name|void
name|removeTab
parameter_list|(
name|BasePanel
name|panel
parameter_list|)
block|{
name|panel
operator|.
name|cleanUp
argument_list|()
expr_stmt|;
name|tabbedPane
operator|.
name|remove
argument_list|(
name|panel
argument_list|)
expr_stmt|;
if|if
condition|(
name|tabbedPane
operator|.
name|getTabCount
argument_list|()
operator|>
literal|0
condition|)
block|{
name|markActiveBasePanel
argument_list|()
expr_stmt|;
block|}
name|setWindowTitle
argument_list|()
expr_stmt|;
name|updateEnabledState
argument_list|()
expr_stmt|;
name|output
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Closed library"
argument_list|)
operator|+
literal|'.'
argument_list|)
expr_stmt|;
comment|// update tab titles
name|updateAllTabTitles
argument_list|()
expr_stmt|;
block|}
DECL|method|closeCurrentTab ()
specifier|public
name|void
name|closeCurrentTab
parameter_list|()
block|{
name|removeTab
argument_list|(
name|getCurrentBasePanel
argument_list|()
argument_list|)
expr_stmt|;
block|}
DECL|method|getManageKeywords ()
specifier|public
name|ManageKeywordsAction
name|getManageKeywords
parameter_list|()
block|{
return|return
name|manageKeywords
return|;
block|}
DECL|method|getMassSetField ()
specifier|public
name|MassSetFieldAction
name|getMassSetField
parameter_list|()
block|{
return|return
name|massSetField
return|;
block|}
DECL|method|getOpenDatabaseAction ()
specifier|public
name|OpenDatabaseAction
name|getOpenDatabaseAction
parameter_list|()
block|{
return|return
name|open
return|;
block|}
DECL|method|getStatusLineText ()
specifier|public
name|String
name|getStatusLineText
parameter_list|()
block|{
return|return
name|statusLine
operator|.
name|getText
argument_list|()
return|;
block|}
DECL|method|getForwardAction ()
specifier|public
name|AbstractAction
name|getForwardAction
parameter_list|()
block|{
return|return
name|forward
return|;
block|}
DECL|method|getBackAction ()
specifier|public
name|AbstractAction
name|getBackAction
parameter_list|()
block|{
return|return
name|back
return|;
block|}
DECL|method|getNextPreviewStyleAction ()
specifier|public
name|AbstractAction
name|getNextPreviewStyleAction
parameter_list|()
block|{
return|return
name|nextPreviewStyle
return|;
block|}
DECL|method|getPreviousPreviewStyleAction ()
specifier|public
name|AbstractAction
name|getPreviousPreviewStyleAction
parameter_list|()
block|{
return|return
name|previousPreviewStyle
return|;
block|}
DECL|method|getSplitPane ()
specifier|public
name|SplitPane
name|getSplitPane
parameter_list|()
block|{
return|return
name|splitPane
return|;
block|}
DECL|method|getSidePaneManager ()
specifier|public
name|SidePaneManager
name|getSidePaneManager
parameter_list|()
block|{
return|return
name|sidePaneManager
return|;
block|}
DECL|method|setPreviewToggle (boolean enabled)
specifier|public
name|void
name|setPreviewToggle
parameter_list|(
name|boolean
name|enabled
parameter_list|)
block|{
name|previewToggle
operator|.
name|setSelected
argument_list|(
name|enabled
argument_list|)
expr_stmt|;
block|}
DECL|method|getPushApplications ()
specifier|public
name|PushToApplications
name|getPushApplications
parameter_list|()
block|{
return|return
name|pushApplications
return|;
block|}
DECL|method|getGlobalSearchBar ()
specifier|public
name|GlobalSearchBar
name|getGlobalSearchBar
parameter_list|()
block|{
return|return
name|globalSearchBar
return|;
block|}
DECL|class|MyGlassPane
specifier|private
specifier|static
class|class
name|MyGlassPane
extends|extends
name|JPanel
block|{
DECL|method|MyGlassPane ()
specifier|public
name|MyGlassPane
parameter_list|()
block|{
name|addKeyListener
argument_list|(
operator|new
name|KeyAdapter
argument_list|()
block|{
comment|// Nothing
block|}
argument_list|)
expr_stmt|;
name|addMouseListener
argument_list|(
operator|new
name|MouseAdapter
argument_list|()
block|{
comment|// Nothing
block|}
argument_list|)
expr_stmt|;
comment|/*  infoLabel.setForeground(new Color(255, 100, 100, 124));                setLayout(new BorderLayout());               add(infoLabel, BorderLayout.CENTER);*/
name|super
operator|.
name|setCursor
argument_list|(
name|Cursor
operator|.
name|getPredefinedCursor
argument_list|(
name|Cursor
operator|.
name|WAIT_CURSOR
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|// Override isOpaque() to prevent the glasspane from hiding the window contents:
annotation|@
name|Override
DECL|method|isOpaque ()
specifier|public
name|boolean
name|isOpaque
parameter_list|()
block|{
return|return
literal|false
return|;
block|}
block|}
DECL|class|EditModeAction
specifier|private
class|class
name|EditModeAction
extends|extends
name|AbstractAction
block|{
DECL|method|EditModeAction ()
specifier|public
name|EditModeAction
parameter_list|()
block|{
name|initName
argument_list|()
expr_stmt|;
block|}
DECL|method|initName ()
specifier|public
name|void
name|initName
parameter_list|()
block|{
if|if
condition|(
name|JabRefFrame
operator|.
name|this
operator|.
name|getCurrentBasePanel
argument_list|()
operator|==
literal|null
condition|)
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Switch to %0 mode"
argument_list|,
literal|"BibTeX/biblatex"
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|BibDatabaseMode
name|mode
init|=
name|JabRefFrame
operator|.
name|this
operator|.
name|getCurrentBasePanel
argument_list|()
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getMode
argument_list|()
decl_stmt|;
name|String
name|modeName
init|=
name|mode
operator|.
name|getOppositeMode
argument_list|()
operator|.
name|getFormattedName
argument_list|()
decl_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Switch to %0 mode"
argument_list|,
name|modeName
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent evt)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|evt
parameter_list|)
block|{
if|if
condition|(
name|JabRefFrame
operator|.
name|this
operator|.
name|getCurrentBasePanel
argument_list|()
operator|==
literal|null
condition|)
block|{
return|return;
block|}
name|BibDatabaseMode
name|newMode
init|=
name|JabRefFrame
operator|.
name|this
operator|.
name|getCurrentBasePanel
argument_list|()
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|getMode
argument_list|()
operator|.
name|getOppositeMode
argument_list|()
decl_stmt|;
name|JabRefFrame
operator|.
name|this
operator|.
name|getCurrentBasePanel
argument_list|()
operator|.
name|getBibDatabaseContext
argument_list|()
operator|.
name|setMode
argument_list|(
name|newMode
argument_list|)
expr_stmt|;
name|JabRefFrame
operator|.
name|this
operator|.
name|refreshTitleAndTabs
argument_list|()
expr_stmt|;
name|initName
argument_list|()
expr_stmt|;
comment|// update all elements in current base panel
name|JabRefFrame
operator|.
name|this
operator|.
name|getCurrentBasePanel
argument_list|()
operator|.
name|hideBottomComponent
argument_list|()
expr_stmt|;
name|JabRefFrame
operator|.
name|this
operator|.
name|getCurrentBasePanel
argument_list|()
operator|.
name|updateEntryEditorIfShowing
argument_list|()
expr_stmt|;
block|}
block|}
DECL|class|GeneralAction
specifier|private
class|class
name|GeneralAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|field|command
specifier|private
specifier|final
name|String
name|command
decl_stmt|;
DECL|method|GeneralAction (String command, String text)
specifier|public
name|GeneralAction
parameter_list|(
name|String
name|command
parameter_list|,
name|String
name|text
parameter_list|)
block|{
name|this
operator|.
name|command
operator|=
name|command
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|text
argument_list|)
expr_stmt|;
block|}
DECL|method|GeneralAction (String command, String text, String description)
specifier|public
name|GeneralAction
parameter_list|(
name|String
name|command
parameter_list|,
name|String
name|text
parameter_list|,
name|String
name|description
parameter_list|)
block|{
name|this
operator|.
name|command
operator|=
name|command
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|text
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|SHORT_DESCRIPTION
argument_list|,
name|description
argument_list|)
expr_stmt|;
block|}
DECL|method|GeneralAction (String command, String text, Icon icon)
specifier|public
name|GeneralAction
parameter_list|(
name|String
name|command
parameter_list|,
name|String
name|text
parameter_list|,
name|Icon
name|icon
parameter_list|)
block|{
name|super
argument_list|(
name|icon
argument_list|)
expr_stmt|;
name|this
operator|.
name|command
operator|=
name|command
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|text
argument_list|)
expr_stmt|;
block|}
DECL|method|GeneralAction (String command, String text, String description, Icon icon)
specifier|public
name|GeneralAction
parameter_list|(
name|String
name|command
parameter_list|,
name|String
name|text
parameter_list|,
name|String
name|description
parameter_list|,
name|Icon
name|icon
parameter_list|)
block|{
name|super
argument_list|(
name|icon
argument_list|)
expr_stmt|;
name|this
operator|.
name|command
operator|=
name|command
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|text
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|SHORT_DESCRIPTION
argument_list|,
name|description
argument_list|)
expr_stmt|;
block|}
DECL|method|GeneralAction (String command, String text, KeyStroke key)
specifier|public
name|GeneralAction
parameter_list|(
name|String
name|command
parameter_list|,
name|String
name|text
parameter_list|,
name|KeyStroke
name|key
parameter_list|)
block|{
name|this
operator|.
name|command
operator|=
name|command
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|text
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|ACCELERATOR_KEY
argument_list|,
name|key
argument_list|)
expr_stmt|;
block|}
DECL|method|GeneralAction (String command, String text, String description, KeyStroke key)
specifier|public
name|GeneralAction
parameter_list|(
name|String
name|command
parameter_list|,
name|String
name|text
parameter_list|,
name|String
name|description
parameter_list|,
name|KeyStroke
name|key
parameter_list|)
block|{
name|this
operator|.
name|command
operator|=
name|command
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|text
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|SHORT_DESCRIPTION
argument_list|,
name|description
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|ACCELERATOR_KEY
argument_list|,
name|key
argument_list|)
expr_stmt|;
block|}
DECL|method|GeneralAction (String command, String text, String description, KeyStroke key, Icon icon)
specifier|public
name|GeneralAction
parameter_list|(
name|String
name|command
parameter_list|,
name|String
name|text
parameter_list|,
name|String
name|description
parameter_list|,
name|KeyStroke
name|key
parameter_list|,
name|Icon
name|icon
parameter_list|)
block|{
name|super
argument_list|(
name|icon
argument_list|)
expr_stmt|;
name|this
operator|.
name|command
operator|=
name|command
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|text
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|SHORT_DESCRIPTION
argument_list|,
name|description
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|ACCELERATOR_KEY
argument_list|,
name|key
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
if|if
condition|(
name|tabbedPane
operator|.
name|getTabCount
argument_list|()
operator|>
literal|0
condition|)
block|{
try|try
block|{
operator|(
operator|(
name|BasePanel
operator|)
name|tabbedPane
operator|.
name|getSelectedComponent
argument_list|()
operator|)
operator|.
name|runCommand
argument_list|(
name|command
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|Throwable
name|ex
parameter_list|)
block|{
name|LOGGER
operator|.
name|error
argument_list|(
literal|"Problem with executing command: "
operator|+
name|command
argument_list|,
name|ex
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|LOGGER
operator|.
name|info
argument_list|(
literal|"Action '"
operator|+
name|command
operator|+
literal|"' must be disabled when no database is open."
argument_list|)
expr_stmt|;
block|}
block|}
block|}
comment|/**      * The action concerned with closing the window.      */
DECL|class|CloseAction
specifier|private
class|class
name|CloseAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|method|CloseAction ()
specifier|public
name|CloseAction
parameter_list|()
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Quit"
argument_list|)
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|SHORT_DESCRIPTION
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Quit JabRef"
argument_list|)
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|ACCELERATOR_KEY
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|QUIT_JABREF
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|quit
argument_list|()
expr_stmt|;
name|Platform
operator|.
name|exit
argument_list|()
expr_stmt|;
block|}
block|}
DECL|class|ShowPrefsAction
specifier|private
class|class
name|ShowPrefsAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|method|ShowPrefsAction ()
specifier|public
name|ShowPrefsAction
parameter_list|()
block|{
name|super
argument_list|(
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|PREFERENCES
operator|.
name|getIcon
argument_list|()
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Preferences"
argument_list|)
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|SHORT_DESCRIPTION
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Preferences"
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|showPreferencesDialog
argument_list|()
expr_stmt|;
block|}
block|}
DECL|class|ChangeTabAction
specifier|private
class|class
name|ChangeTabAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|field|next
specifier|private
specifier|final
name|boolean
name|next
decl_stmt|;
DECL|method|ChangeTabAction (boolean next)
specifier|public
name|ChangeTabAction
parameter_list|(
name|boolean
name|next
parameter_list|)
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|next
condition|?
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Next tab"
argument_list|)
else|:
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Previous tab"
argument_list|)
argument_list|)
expr_stmt|;
name|this
operator|.
name|next
operator|=
name|next
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|ACCELERATOR_KEY
argument_list|,
name|next
condition|?
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|NEXT_TAB
argument_list|)
else|:
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|PREVIOUS_TAB
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|int
name|i
init|=
name|tabbedPane
operator|.
name|getSelectedIndex
argument_list|()
decl_stmt|;
name|int
name|newI
init|=
name|next
condition|?
name|i
operator|+
literal|1
else|:
name|i
operator|-
literal|1
decl_stmt|;
if|if
condition|(
name|newI
operator|<
literal|0
condition|)
block|{
name|newI
operator|=
name|tabbedPane
operator|.
name|getTabCount
argument_list|()
operator|-
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|newI
operator|==
name|tabbedPane
operator|.
name|getTabCount
argument_list|()
condition|)
block|{
name|newI
operator|=
literal|0
expr_stmt|;
block|}
name|tabbedPane
operator|.
name|setSelectedIndex
argument_list|(
name|newI
argument_list|)
expr_stmt|;
block|}
block|}
comment|/**      * Class for handling general actions; cut, copy and paste. The focused component is      * kept track of by Globals.focusListener, and we call the action stored under the      * relevant name in its action map.      */
DECL|class|EditAction
specifier|private
class|class
name|EditAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|field|command
specifier|private
specifier|final
name|String
name|command
decl_stmt|;
DECL|method|EditAction (String command, String menuTitle, String description, KeyStroke key, Icon icon)
specifier|public
name|EditAction
parameter_list|(
name|String
name|command
parameter_list|,
name|String
name|menuTitle
parameter_list|,
name|String
name|description
parameter_list|,
name|KeyStroke
name|key
parameter_list|,
name|Icon
name|icon
parameter_list|)
block|{
name|super
argument_list|(
name|icon
argument_list|)
expr_stmt|;
name|this
operator|.
name|command
operator|=
name|command
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|menuTitle
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|ACCELERATOR_KEY
argument_list|,
name|key
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|SHORT_DESCRIPTION
argument_list|,
name|description
argument_list|)
expr_stmt|;
block|}
DECL|method|actionPerformed (ActionEvent e)
annotation|@
name|Override
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|LOGGER
operator|.
name|debug
argument_list|(
name|Globals
operator|.
name|getFocusListener
argument_list|()
operator|.
name|getFocused
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|JComponent
name|source
init|=
name|Globals
operator|.
name|getFocusListener
argument_list|()
operator|.
name|getFocused
argument_list|()
decl_stmt|;
name|Action
name|action
init|=
name|source
operator|.
name|getActionMap
argument_list|()
operator|.
name|get
argument_list|(
name|command
argument_list|)
decl_stmt|;
if|if
condition|(
name|action
operator|!=
literal|null
condition|)
block|{
name|action
operator|.
name|actionPerformed
argument_list|(
operator|new
name|ActionEvent
argument_list|(
name|source
argument_list|,
literal|0
argument_list|,
name|command
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
block|}
DECL|class|CustomizeExportsAction
specifier|private
class|class
name|CustomizeExportsAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|method|CustomizeExportsAction ()
specifier|public
name|CustomizeExportsAction
parameter_list|()
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Manage custom exports"
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|ExportCustomizationDialog
name|ecd
init|=
operator|new
name|ExportCustomizationDialog
argument_list|(
name|JabRefFrame
operator|.
name|this
argument_list|)
decl_stmt|;
name|ecd
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|CustomizeImportsAction
specifier|private
class|class
name|CustomizeImportsAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|method|CustomizeImportsAction ()
specifier|public
name|CustomizeImportsAction
parameter_list|()
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Manage custom imports"
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|ImportCustomizationDialog
name|ecd
init|=
operator|new
name|ImportCustomizationDialog
argument_list|(
name|JabRefFrame
operator|.
name|this
argument_list|)
decl_stmt|;
name|ecd
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|CustomizeEntryTypeAction
specifier|private
class|class
name|CustomizeEntryTypeAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|method|CustomizeEntryTypeAction ()
specifier|public
name|CustomizeEntryTypeAction
parameter_list|()
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Customize entry types"
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|JDialog
name|dl
init|=
operator|new
name|EntryCustomizationDialog
argument_list|(
name|JabRefFrame
operator|.
name|this
argument_list|)
decl_stmt|;
name|dl
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|GenFieldsCustomizationAction
specifier|private
class|class
name|GenFieldsCustomizationAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|method|GenFieldsCustomizationAction ()
specifier|public
name|GenFieldsCustomizationAction
parameter_list|()
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Set up general fields"
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|GenFieldsCustomizer
name|gf
init|=
operator|new
name|GenFieldsCustomizer
argument_list|(
name|JabRefFrame
operator|.
name|this
argument_list|)
decl_stmt|;
name|gf
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|ProtectedTermsAction
specifier|private
class|class
name|ProtectedTermsAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|method|ProtectedTermsAction ()
specifier|public
name|ProtectedTermsAction
parameter_list|()
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Manage protected terms"
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|ProtectedTermsDialog
name|protectTermsDialog
init|=
operator|new
name|ProtectedTermsDialog
argument_list|(
name|JabRefFrame
operator|.
name|this
argument_list|,
name|Globals
operator|.
name|protectedTermsLoader
argument_list|)
decl_stmt|;
name|protectTermsDialog
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|DatabasePropertiesAction
specifier|private
class|class
name|DatabasePropertiesAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|field|propertiesDialog
specifier|private
name|DatabasePropertiesDialog
name|propertiesDialog
decl_stmt|;
DECL|method|DatabasePropertiesAction ()
specifier|public
name|DatabasePropertiesAction
parameter_list|()
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Library properties"
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
if|if
condition|(
name|propertiesDialog
operator|==
literal|null
condition|)
block|{
name|propertiesDialog
operator|=
operator|new
name|DatabasePropertiesDialog
argument_list|(
literal|null
argument_list|)
expr_stmt|;
block|}
name|propertiesDialog
operator|.
name|setPanel
argument_list|(
name|getCurrentBasePanel
argument_list|()
argument_list|)
expr_stmt|;
name|propertiesDialog
operator|.
name|updateEnableStatus
argument_list|()
expr_stmt|;
name|propertiesDialog
operator|.
name|setLocationRelativeTo
argument_list|(
literal|null
argument_list|)
expr_stmt|;
name|propertiesDialog
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|BibtexKeyPatternAction
specifier|private
class|class
name|BibtexKeyPatternAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|field|bibtexKeyPatternDialog
specifier|private
name|BibtexKeyPatternDialog
name|bibtexKeyPatternDialog
decl_stmt|;
DECL|method|BibtexKeyPatternAction ()
specifier|public
name|BibtexKeyPatternAction
parameter_list|()
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"BibTeX key patterns"
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|JabRefPreferences
operator|.
name|getInstance
argument_list|()
expr_stmt|;
if|if
condition|(
name|bibtexKeyPatternDialog
operator|==
literal|null
condition|)
block|{
comment|// if no instance of BibtexKeyPatternDialog exists, create new one
name|bibtexKeyPatternDialog
operator|=
operator|new
name|BibtexKeyPatternDialog
argument_list|(
name|JabRefFrame
operator|.
name|this
argument_list|,
name|getCurrentBasePanel
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|// BibtexKeyPatternDialog allows for updating content based on currently selected panel
name|bibtexKeyPatternDialog
operator|.
name|setPanel
argument_list|(
name|getCurrentBasePanel
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|bibtexKeyPatternDialog
operator|.
name|setLocationRelativeTo
argument_list|(
literal|null
argument_list|)
expr_stmt|;
name|bibtexKeyPatternDialog
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|DefaultTableFontSizeAction
specifier|private
class|class
name|DefaultTableFontSizeAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|method|DefaultTableFontSizeAction ()
specifier|public
name|DefaultTableFontSizeAction
parameter_list|()
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Default table font size"
argument_list|)
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|ACCELERATOR_KEY
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|DEFAULT_TABLE_FONT_SIZE
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent event)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|event
parameter_list|)
block|{
name|GUIGlobals
operator|.
name|setFont
argument_list|(
name|Globals
operator|.
name|prefs
operator|.
name|getIntDefault
argument_list|(
name|JabRefPreferences
operator|.
name|FONT_SIZE
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|BasePanel
name|basePanel
range|:
name|getBasePanelList
argument_list|()
control|)
block|{
name|basePanel
operator|.
name|updateTableFont
argument_list|()
expr_stmt|;
block|}
name|setStatus
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Table font size is %0"
argument_list|,
name|String
operator|.
name|valueOf
argument_list|(
name|GUIGlobals
operator|.
name|currentFont
operator|.
name|getSize
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|IncreaseTableFontSizeAction
specifier|private
class|class
name|IncreaseTableFontSizeAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|method|IncreaseTableFontSizeAction ()
specifier|public
name|IncreaseTableFontSizeAction
parameter_list|()
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Increase table font size"
argument_list|)
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|ACCELERATOR_KEY
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|INCREASE_TABLE_FONT_SIZE
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent event)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|event
parameter_list|)
block|{
name|GUIGlobals
operator|.
name|setFont
argument_list|(
name|GUIGlobals
operator|.
name|currentFont
operator|.
name|getSize
argument_list|()
operator|+
literal|1
argument_list|)
expr_stmt|;
for|for
control|(
name|BasePanel
name|basePanel
range|:
name|getBasePanelList
argument_list|()
control|)
block|{
name|basePanel
operator|.
name|updateTableFont
argument_list|()
expr_stmt|;
block|}
name|setStatus
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Table font size is %0"
argument_list|,
name|String
operator|.
name|valueOf
argument_list|(
name|GUIGlobals
operator|.
name|currentFont
operator|.
name|getSize
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|DecreaseTableFontSizeAction
specifier|private
class|class
name|DecreaseTableFontSizeAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|method|DecreaseTableFontSizeAction ()
specifier|public
name|DecreaseTableFontSizeAction
parameter_list|()
block|{
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Decrease table font size"
argument_list|)
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|ACCELERATOR_KEY
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|DECREASE_TABLE_FONT_SIZE
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent event)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|event
parameter_list|)
block|{
name|int
name|currentSize
init|=
name|GUIGlobals
operator|.
name|currentFont
operator|.
name|getSize
argument_list|()
decl_stmt|;
if|if
condition|(
name|currentSize
operator|<
literal|2
condition|)
block|{
return|return;
block|}
name|GUIGlobals
operator|.
name|setFont
argument_list|(
name|currentSize
operator|-
literal|1
argument_list|)
expr_stmt|;
for|for
control|(
name|BasePanel
name|basePanel
range|:
name|getBasePanelList
argument_list|()
control|)
block|{
name|basePanel
operator|.
name|updateTableFont
argument_list|()
expr_stmt|;
block|}
name|setStatus
argument_list|(
name|Localization
operator|.
name|lang
argument_list|(
literal|"Table font size is %0"
argument_list|,
name|String
operator|.
name|valueOf
argument_list|(
name|GUIGlobals
operator|.
name|currentFont
operator|.
name|getSize
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|CloseDatabaseAction
specifier|private
class|class
name|CloseDatabaseAction
extends|extends
name|MnemonicAwareAction
block|{
DECL|method|CloseDatabaseAction ()
specifier|public
name|CloseDatabaseAction
parameter_list|()
block|{
name|super
argument_list|(
name|IconTheme
operator|.
name|JabRefIcon
operator|.
name|CLOSE
operator|.
name|getSmallIcon
argument_list|()
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|NAME
argument_list|,
name|Localization
operator|.
name|menuTitle
argument_list|(
literal|"Close library"
argument_list|)
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|SHORT_DESCRIPTION
argument_list|,
name|Localization
operator|.
name|lang
argument_list|(
literal|"Close the current library"
argument_list|)
argument_list|)
expr_stmt|;
name|putValue
argument_list|(
name|Action
operator|.
name|ACCELERATOR_KEY
argument_list|,
name|Globals
operator|.
name|getKeyPrefs
argument_list|()
operator|.
name|getKey
argument_list|(
name|KeyBinding
operator|.
name|CLOSE_DATABASE
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
name|closeTab
argument_list|(
name|getCurrentBasePanel
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|CloseAllDatabasesAction
specifier|private
class|class
name|CloseAllDatabasesAction
extends|extends
name|MnemonicAwareAction
block|{
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
specifier|final
name|Component
index|[]
name|panels
init|=
name|tabbedPane
operator|.
name|getComponents
argument_list|()
decl_stmt|;
for|for
control|(
name|Component
name|p
range|:
name|panels
control|)
block|{
name|closeTab
argument_list|(
operator|(
name|BasePanel
operator|)
name|p
argument_list|)
expr_stmt|;
block|}
block|}
block|}
DECL|class|CloseOtherDatabasesAction
specifier|private
class|class
name|CloseOtherDatabasesAction
extends|extends
name|MnemonicAwareAction
block|{
annotation|@
name|Override
DECL|method|actionPerformed (ActionEvent e)
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|ActionEvent
name|e
parameter_list|)
block|{
specifier|final
name|BasePanel
name|active
init|=
name|getCurrentBasePanel
argument_list|()
decl_stmt|;
specifier|final
name|Component
index|[]
name|panels
init|=
name|tabbedPane
operator|.
name|getComponents
argument_list|()
decl_stmt|;
for|for
control|(
name|Component
name|p
range|:
name|panels
control|)
block|{
if|if
condition|(
operator|!
name|Objects
operator|.
name|equals
argument_list|(
name|p
argument_list|,
name|active
argument_list|)
condition|)
block|{
name|closeTab
argument_list|(
operator|(
name|BasePanel
operator|)
name|p
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
DECL|class|ToolBar
specifier|private
class|class
name|ToolBar
extends|extends
name|OSXCompatibleToolbar
block|{
DECL|method|addAction (Action a)
specifier|public
name|void
name|addAction
parameter_list|(
name|Action
name|a
parameter_list|)
block|{
name|JButton
name|b
init|=
operator|new
name|JButton
argument_list|(
name|a
argument_list|)
decl_stmt|;
name|b
operator|.
name|setText
argument_list|(
literal|null
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|OS
operator|.
name|OS_X
condition|)
block|{
name|b
operator|.
name|setMargin
argument_list|(
name|marg
argument_list|)
expr_stmt|;
block|}
comment|// create a disabled Icon for FontBasedIcons as Swing does not automatically create one
name|Object
name|obj
init|=
name|a
operator|.
name|getValue
argument_list|(
name|Action
operator|.
name|LARGE_ICON_KEY
argument_list|)
decl_stmt|;
if|if
condition|(
name|obj
operator|instanceof
name|IconTheme
operator|.
name|FontBasedIcon
condition|)
block|{
name|b
operator|.
name|setDisabledIcon
argument_list|(
operator|(
operator|(
name|IconTheme
operator|.
name|FontBasedIcon
operator|)
name|obj
operator|)
operator|.
name|createDisabledIcon
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|add
argument_list|(
name|b
argument_list|)
expr_stmt|;
block|}
DECL|method|addJToggleButton (JToggleButton button)
specifier|public
name|void
name|addJToggleButton
parameter_list|(
name|JToggleButton
name|button
parameter_list|)
block|{
name|button
operator|.
name|setText
argument_list|(
literal|null
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|OS
operator|.
name|OS_X
condition|)
block|{
name|button
operator|.
name|setMargin
argument_list|(
name|marg
argument_list|)
expr_stmt|;
block|}
name|Object
name|obj
init|=
name|button
operator|.
name|getAction
argument_list|()
operator|.
name|getValue
argument_list|(
name|Action
operator|.
name|LARGE_ICON_KEY
argument_list|)
decl_stmt|;
if|if
condition|(
name|obj
operator|instanceof
name|IconTheme
operator|.
name|FontBasedIcon
condition|)
block|{
name|button
operator|.
name|setDisabledIcon
argument_list|(
operator|(
operator|(
name|IconTheme
operator|.
name|FontBasedIcon
operator|)
name|obj
operator|)
operator|.
name|createDisabledIcon
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|add
argument_list|(
name|button
argument_list|)
expr_stmt|;
block|}
block|}
DECL|class|UndoRedoEventManager
specifier|private
class|class
name|UndoRedoEventManager
block|{
annotation|@
name|Subscribe
DECL|method|listen (UndoRedoEvent event)
specifier|public
name|void
name|listen
parameter_list|(
name|UndoRedoEvent
name|event
parameter_list|)
block|{
name|updateTexts
argument_list|(
name|event
argument_list|)
expr_stmt|;
name|JabRefFrame
operator|.
name|this
operator|.
name|getCurrentBasePanel
argument_list|()
operator|.
name|updateEntryEditorIfShowing
argument_list|()
expr_stmt|;
block|}
annotation|@
name|Subscribe
DECL|method|listen (AddUndoableActionEvent event)
specifier|public
name|void
name|listen
parameter_list|(
name|AddUndoableActionEvent
name|event
parameter_list|)
block|{
name|updateTexts
argument_list|(
name|event
argument_list|)
expr_stmt|;
block|}
DECL|method|updateTexts (UndoChangeEvent event)
specifier|private
name|void
name|updateTexts
parameter_list|(
name|UndoChangeEvent
name|event
parameter_list|)
block|{
name|SwingUtilities
operator|.
name|invokeLater
argument_list|(
parameter_list|()
lambda|->
block|{
name|undo
operator|.
name|putValue
argument_list|(
name|Action
operator|.
name|SHORT_DESCRIPTION
argument_list|,
name|event
operator|.
name|getUndoDescription
argument_list|()
argument_list|)
expr_stmt|;
name|undo
operator|.
name|setEnabled
argument_list|(
name|event
operator|.
name|isCanUndo
argument_list|()
argument_list|)
expr_stmt|;
name|redo
operator|.
name|putValue
argument_list|(
name|Action
operator|.
name|SHORT_DESCRIPTION
argument_list|,
name|event
operator|.
name|getRedoDescription
argument_list|()
argument_list|)
expr_stmt|;
name|redo
operator|.
name|setEnabled
argument_list|(
name|event
operator|.
name|isCanRedo
argument_list|()
argument_list|)
expr_stmt|;
block|}
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_class

end_unit

